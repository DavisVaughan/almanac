<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Create an adjusted rschedule — radjusted • almanac</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Create an adjusted rschedule — radjusted"><meta name="description" content="radjusted() creates a new adjusted rschedule on top of an existing one. The
new rschedule contains the same event dates as the existing rschedule,
except when they intersect with the dates in the event set of the
rschedule, adjust_on. In those cases, an adjustment is applied to the
problematic dates to shift them to valid event dates.
This is most useful when creating corporate holiday rschedules. For example,
Christmas always falls on December 25th, but if it falls on a Saturday,
your company might observe Christmas on the previous Friday. If it falls
on a Sunday, you might observe it on the following Monday. In this case,
you could construct an rschedule for a recurring event of December 25th,
and a second rschedule for weekends. When Christmas falls on a weekend,
you would apply an adjustment of adj_nearest() to get the observance date."><meta property="og:description" content="radjusted() creates a new adjusted rschedule on top of an existing one. The
new rschedule contains the same event dates as the existing rschedule,
except when they intersect with the dates in the event set of the
rschedule, adjust_on. In those cases, an adjustment is applied to the
problematic dates to shift them to valid event dates.
This is most useful when creating corporate holiday rschedules. For example,
Christmas always falls on December 25th, but if it falls on a Saturday,
your company might observe Christmas on the previous Friday. If it falls
on a Sunday, you might observe it on the following Monday. In this case,
you could construct an rschedule for a recurring event of December 25th,
and a second rschedule for weekends. When Christmas falls on a weekend,
you would apply an adjustment of adj_nearest() to get the observance date."><meta name="robots" content="noindex"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">almanac</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">1.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/almanac.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/adjust-and-shift.html">Adjusting and shifting dates</a></li>
    <li><a class="dropdown-item" href="../articles/holidays-calendars.html">Holidays and calendars</a></li>
    <li><a class="dropdown-item" href="../articles/icalendar.html">iCalendar specification</a></li>
    <li><a class="dropdown-item" href="../articles/quarterly.html">Quarterly rules</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/DavisVaughan/almanac/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Create an adjusted rschedule</h1>
      <small class="dont-index">Source: <a href="https://github.com/DavisVaughan/almanac/blob/main/R/radjusted.R" class="external-link"><code>R/radjusted.R</code></a></small>
      <div class="d-none name"><code>radjusted.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>radjusted()</code> creates a new adjusted rschedule on top of an existing one. The
new rschedule contains the same event dates as the existing rschedule,
except when they intersect with the dates in the event set of the
rschedule, <code>adjust_on</code>. In those cases, an <code>adjustment</code> is applied to the
problematic dates to shift them to valid event dates.</p>
<p>This is most useful when creating corporate holiday rschedules. For example,
Christmas always falls on December 25th, but if it falls on a Saturday,
your company might observe Christmas on the previous Friday. If it falls
on a Sunday, you might observe it on the following Monday. In this case,
you could construct an rschedule for a recurring event of December 25th,
and a second rschedule for weekends. When Christmas falls on a weekend,
you would apply an adjustment of <code><a href="adjustments.html">adj_nearest()</a></code> to get the observance date.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">radjusted</span><span class="op">(</span><span class="va">rschedule</span>, <span class="va">adjust_on</span>, <span class="va">adjustment</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-rschedule">rschedule<a class="anchor" aria-label="anchor" href="#arg-rschedule"></a></dt>
<dd><p><code>[rschedule]</code></p>
<p>An rschedule, such as an rrule, runion, rintersect, or rsetdiff.</p></dd>


<dt id="arg-adjust-on">adjust_on<a class="anchor" aria-label="anchor" href="#arg-adjust-on"></a></dt>
<dd><p><code>[rschedule]</code></p>
<p>An rschedule that determines when the <code>adjustment</code> is to be applied.</p></dd>


<dt id="arg-adjustment">adjustment<a class="anchor" aria-label="anchor" href="#arg-adjustment"></a></dt>
<dd><p><code>[function]</code></p>
<p>An adjustment function to apply to problematic dates. Typically one
of the pre-existing adjustment functions, like <code><a href="adjustments.html">adj_nearest()</a></code>.</p>
<p>A custom adjustment function must have two arguments <code>x</code> and <code>rschedule</code>.
<code>x</code> is the complete vector of dates that possibly need adjustment.
<code>rschedule</code> is the rschedule who's event set determines when an
adjustment needs to be applied. The function should adjust <code>x</code> as required
and return the adjusted Date vector.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>An adjusted rschedule.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">since</span> <span class="op">&lt;-</span> <span class="st">"2000-01-01"</span></span></span>
<span class="r-in"><span><span class="va">until</span> <span class="op">&lt;-</span> <span class="st">"2010-01-01"</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">on_christmas</span> <span class="op">&lt;-</span> <span class="fu"><a href="rrule.html">yearly</a></span><span class="op">(</span>since <span class="op">=</span> <span class="va">since</span>, until <span class="op">=</span> <span class="va">until</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="recur_on_month_of_year.html">recur_on_month_of_year</a></span><span class="op">(</span><span class="st">"Dec"</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="recur_on_day_of_month.html">recur_on_day_of_month</a></span><span class="op">(</span><span class="fl">25</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># All Christmas dates, with no adjustments</span></span></span>
<span class="r-in"><span><span class="fu"><a href="alma_events.html">alma_events</a></span><span class="op">(</span><span class="va">on_christmas</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] "2000-12-25" "2001-12-25" "2002-12-25" "2003-12-25" "2004-12-25"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [6] "2005-12-25" "2006-12-25" "2007-12-25" "2008-12-25" "2009-12-25"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">on_weekends</span> <span class="op">&lt;-</span> <span class="fu"><a href="rrule.html">weekly</a></span><span class="op">(</span>since <span class="op">=</span> <span class="va">since</span>, until <span class="op">=</span> <span class="va">until</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="recur_on_day_of_week.html">recur_on_weekends</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Now all Christmas dates that fell on a weekend are</span></span></span>
<span class="r-in"><span><span class="co"># adjusted either forwards or backwards, depending on which</span></span></span>
<span class="r-in"><span><span class="co"># non-event date was closer</span></span></span>
<span class="r-in"><span><span class="va">on_adj_christmas</span> <span class="op">&lt;-</span> <span class="fu">radjusted</span><span class="op">(</span><span class="va">on_christmas</span>, <span class="va">on_weekends</span>, <span class="va">adj_nearest</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="alma_events.html">alma_events</a></span><span class="op">(</span><span class="va">on_adj_christmas</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] "2000-12-25" "2001-12-25" "2002-12-25" "2003-12-25" "2004-12-24"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [6] "2005-12-26" "2006-12-25" "2007-12-25" "2008-12-25" "2009-12-25"</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Davis Vaughan, Posit Software, PBC.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

