[{"path":[]},{"path":"/dev/CODE_OF_CONDUCT.html","id":"our-pledge","dir":"","previous_headings":"","what":"Our Pledge","title":"Contributor Covenant Code of Conduct","text":"members, contributors, leaders pledge make participation community harassment-free experience everyone, regardless age, body size, visible invisible disability, ethnicity, sex characteristics, gender identity expression, level experience, education, socio-economic status, nationality, personal appearance, race, caste, color, religion, sexual identity orientation. pledge act interact ways contribute open, welcoming, diverse, inclusive, healthy community.","code":""},{"path":"/dev/CODE_OF_CONDUCT.html","id":"our-standards","dir":"","previous_headings":"","what":"Our Standards","title":"Contributor Covenant Code of Conduct","text":"Examples behavior contributes positive environment community include: Demonstrating empathy kindness toward people respectful differing opinions, viewpoints, experiences Giving gracefully accepting constructive feedback Accepting responsibility apologizing affected mistakes, learning experience Focusing best just us individuals, overall community Examples unacceptable behavior include: use sexualized language imagery, sexual attention advances kind Trolling, insulting derogatory comments, personal political attacks Public private harassment Publishing others’ private information, physical email address, without explicit permission conduct reasonably considered inappropriate professional setting","code":""},{"path":"/dev/CODE_OF_CONDUCT.html","id":"enforcement-responsibilities","dir":"","previous_headings":"","what":"Enforcement Responsibilities","title":"Contributor Covenant Code of Conduct","text":"Community leaders responsible clarifying enforcing standards acceptable behavior take appropriate fair corrective action response behavior deem inappropriate, threatening, offensive, harmful. Community leaders right responsibility remove, edit, reject comments, commits, code, wiki edits, issues, contributions aligned Code Conduct, communicate reasons moderation decisions appropriate.","code":""},{"path":"/dev/CODE_OF_CONDUCT.html","id":"scope","dir":"","previous_headings":"","what":"Scope","title":"Contributor Covenant Code of Conduct","text":"Code Conduct applies within community spaces, also applies individual officially representing community public spaces. Examples representing community include using official e-mail address, posting via official social media account, acting appointed representative online offline event.","code":""},{"path":"/dev/CODE_OF_CONDUCT.html","id":"enforcement","dir":"","previous_headings":"","what":"Enforcement","title":"Contributor Covenant Code of Conduct","text":"Instances abusive, harassing, otherwise unacceptable behavior may reported community leaders responsible enforcement codeofconduct@posit.co. complaints reviewed investigated promptly fairly. community leaders obligated respect privacy security reporter incident.","code":""},{"path":"/dev/CODE_OF_CONDUCT.html","id":"enforcement-guidelines","dir":"","previous_headings":"","what":"Enforcement Guidelines","title":"Contributor Covenant Code of Conduct","text":"Community leaders follow Community Impact Guidelines determining consequences action deem violation Code Conduct:","code":""},{"path":"/dev/CODE_OF_CONDUCT.html","id":"id_1-correction","dir":"","previous_headings":"Enforcement Guidelines","what":"1. Correction","title":"Contributor Covenant Code of Conduct","text":"Community Impact: Use inappropriate language behavior deemed unprofessional unwelcome community. Consequence: private, written warning community leaders, providing clarity around nature violation explanation behavior inappropriate. public apology may requested.","code":""},{"path":"/dev/CODE_OF_CONDUCT.html","id":"id_2-warning","dir":"","previous_headings":"Enforcement Guidelines","what":"2. Warning","title":"Contributor Covenant Code of Conduct","text":"Community Impact: violation single incident series actions. Consequence: warning consequences continued behavior. interaction people involved, including unsolicited interaction enforcing Code Conduct, specified period time. includes avoiding interactions community spaces well external channels like social media. Violating terms may lead temporary permanent ban.","code":""},{"path":"/dev/CODE_OF_CONDUCT.html","id":"id_3-temporary-ban","dir":"","previous_headings":"Enforcement Guidelines","what":"3. Temporary Ban","title":"Contributor Covenant Code of Conduct","text":"Community Impact: serious violation community standards, including sustained inappropriate behavior. Consequence: temporary ban sort interaction public communication community specified period time. public private interaction people involved, including unsolicited interaction enforcing Code Conduct, allowed period. Violating terms may lead permanent ban.","code":""},{"path":"/dev/CODE_OF_CONDUCT.html","id":"id_4-permanent-ban","dir":"","previous_headings":"Enforcement Guidelines","what":"4. Permanent Ban","title":"Contributor Covenant Code of Conduct","text":"Community Impact: Demonstrating pattern violation community standards, including sustained inappropriate behavior, harassment individual, aggression toward disparagement classes individuals. Consequence: permanent ban sort public interaction within community.","code":""},{"path":"/dev/CODE_OF_CONDUCT.html","id":"attribution","dir":"","previous_headings":"","what":"Attribution","title":"Contributor Covenant Code of Conduct","text":"Code Conduct adapted Contributor Covenant, version 2.1, available https://www.contributor-covenant.org/version/2/1/code_of_conduct.html. Community Impact Guidelines inspired [Mozilla’s code conduct enforcement ladder][https://github.com/mozilla/inclusion]. answers common questions code conduct, see FAQ https://www.contributor-covenant.org/faq. Translations available https://www.contributor-covenant.org/translations.","code":""},{"path":"/dev/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"MIT License","title":"MIT License","text":"Copyright (c) 2023 almanac authors Permission hereby granted, free charge, person obtaining copy software associated documentation files (“Software”), deal Software without restriction, including without limitation rights use, copy, modify, merge, publish, distribute, sublicense, /sell copies Software, permit persons Software furnished , subject following conditions: copyright notice permission notice shall included copies substantial portions Software. SOFTWARE PROVIDED “”, WITHOUT WARRANTY KIND, EXPRESS IMPLIED, INCLUDING LIMITED WARRANTIES MERCHANTABILITY, FITNESS PARTICULAR PURPOSE NONINFRINGEMENT. EVENT SHALL AUTHORS COPYRIGHT HOLDERS LIABLE CLAIM, DAMAGES LIABILITY, WHETHER ACTION CONTRACT, TORT OTHERWISE, ARISING , CONNECTION SOFTWARE USE DEALINGS SOFTWARE.","code":""},{"path":"/dev/articles/adjust-and-shift.html","id":"adjusting","dir":"Articles","previous_headings":"","what":"Adjusting","title":"Adjusting and shifting dates","text":"“Adjusting” date defines behavior happens date lands event rschedule’s event set. example, date currently Christmas, adjust forward next non-event date, adjust backwards previous non-event date, adjust nearest non-event date. logic perform adjustments encoded following adjustment functions: adj_following() Choose first non-event date x. adj_preceding() Choose first non-event date x. adj_modified_following() Choose first non-event date x, unless falls different month, case first non-event date x chosen instead. adj_modified_preceding() Choose first non-event date x, unless falls different month, case first non-event date x chosen instead. adj_nearest() Choose nearest non-event date x. closest preceding following non-event dates equally far away, following non-event date chosen. adj_none() Performs adjustment returns x unchanged. use adjustment function, ’ll need rschedule contains event set interested adjusting around. provide , along dates interested adjusting, adj_*() function. adj_nearest() function particularly useful date weekend want roll back Friday falls Saturday roll forward Monday falls Sunday.","code":"on_christmas <- yearly() %>%   recur_on_day_of_month(25) %>%   recur_on_month_of_year(\"Dec\")  x <- as.Date(c(\"2019-12-24\", \"2019-12-25\"))  adj_following(x, on_christmas) #> [1] \"2019-12-24\" \"2019-12-26\"  adj_preceding(x, on_christmas) #> [1] \"2019-12-24\" \"2019-12-24\" # Saturday / Sunday x <- as.Date(c(\"2019-12-21\", \"2019-12-22\"))  on_weekends <- weekly() %>%   recur_on_weekends()  # Roll Saturday backwards and Sunday forwards adj_nearest(x, on_weekends) #> [1] \"2019-12-20\" \"2019-12-23\""},{"path":"/dev/articles/adjust-and-shift.html","id":"adjusted-rschedules","dir":"Articles","previous_headings":"","what":"Adjusted rschedules","title":"Adjusting and shifting dates","text":"introduction vignette, introduced number different rschedules. reminder, rschedule just general term rrule rset. actually third type rschedule almanac, called radjusted, useful combined adjustment functions. motivate , imagine company deems Christmas holiday. Whenever Christmas rolls around 25th December, get day . happens Christmas falls Saturday? Sunday? corporations observe holiday falls weekend nearest working day instead weekend date actually occurred . almanac, seems like pose problem. can create rrules Christmas weekends, rset like runion, rintersect, rsetdiff perform kind set operation . really need way say: recur dates defined rschedule, unless intersects second rschedule. cases, apply adjustment intersected dates create valid dates. job radjusted. just another rschedule, can used alma_*() functions ’ve seen far. example, can confirm Christmas dates fall weekend adjusted appropriately searching .","code":"on_adjusted_christmas <- radjusted(   rschedule = on_christmas,    adjust_on = on_weekends,   adjustment = adj_nearest )  on_adjusted_christmas #> <radjusted> #>  adjust: #>  <rrule> #>  • frequency: yearly #>  • range: [1900-01-01, 2100-01-01] #>  • month of year: Dec #>  • day of month: 25 #>  adjust on: #>  <rrule> #>  • frequency: weekly #>  • range: [1900-01-01, 2100-01-01] #>  • day of week: Sat and Sun # Note 2004-12-24, which was rolled back from 2004-12-25, a Saturday. # Note 2005-12-26, which was rolled forward from 2005-12-25, a Sunday. alma_search(\"2002-01-01\", \"2008-01-01\", on_adjusted_christmas) #> [1] \"2002-12-25\" \"2003-12-25\" \"2004-12-24\" \"2005-12-26\" \"2006-12-25\" #> [6] \"2007-12-25\""},{"path":"/dev/articles/adjust-and-shift.html","id":"stepping","dir":"Articles","previous_headings":"","what":"Stepping","title":"Adjusting and shifting dates","text":"alma_step() allows take existing vector dates shift number days, “stepping ” events event set defined rschedule. generally useful shifting “N business days”, logic business day encapsulated rschedule. can think alma_step() way replace lubridate’s x + days(5) x + business_days(5) business_days() specific company’s holiday calendar. following example, shift Thursday Friday 1 working day. Notice Friday shifted forward Monday. Internally, n applied 1 day time. adj_following() called 1 day shift n positive, otherwise adj_preceding() called. break , ’ll analyze Friday. Start 2019-12-20, Friday. Step forward 1 day, 2019-12-21, Saturday. Apply adj_following(), landing us Monday, 2019-12-23. can shift backwards negative n. ’s also fully vectorized, can use different signs n call. example, let’s consider happens start non-event date. , start Saturday Sunday, apply +1 -1 day shift , respectively. Saturday, apply 1 day shift, landing Sunday, call adj_following(), landing Monday. Sunday, apply -1 day shift, landing Saturday, call adj_preceding(), landing Friday.","code":"# A Thursday / Friday pair x <- as.Date(c(\"2019-12-19\", \"2019-12-20\"))  # Shift by 1 working day, stepping over weekends step <- alma_step(x, n = 1, rschedule = on_weekends)  data.frame(   x = x,   x_wday = wday(x, label = TRUE),   step = step,   step_wday = wday(step, label = TRUE) ) #>            x x_wday       step step_wday #> 1 2019-12-19    Thu 2019-12-20       Fri #> 2 2019-12-20    Fri 2019-12-23       Mon # A Saturday / Sunday pair x <- as.Date(c(\"2019-12-21\", \"2019-12-22\"))  step <- alma_step(x, c(1, -1), on_weekends)  data.frame(   x = x,   x_wday = wday(x, label = TRUE),   step = step,   step_wday = wday(step, label = TRUE) ) #>            x x_wday       step step_wday #> 1 2019-12-21    Sat 2019-12-23       Mon #> 2 2019-12-22    Sun 2019-12-20       Fri"},{"path":"/dev/articles/adjust-and-shift.html","id":"steppers","dir":"Articles","previous_headings":"","what":"Steppers","title":"Adjusting and shifting dates","text":"alma_step() nice, really nice something like lubridate’s x + days(5) syntax, relative rschedule. Due issues R’s S3 dispatch system works +, isn’t exactly replicable almanac, can get close (lubridate uses R’s S4 object oriented system get work, don’t want go ). First , need object holds information shift relative rschedule. can create one stepper(). thing give stepper() rschedule step relative . returns function 1 argument, n, ’ll call desired number days shift. resulting object can added subtracted vector dates. sounds little complicated, hopefully things clear example. Let’s reproduce last example previous section: Notice usage %s+%. replaces +, allows step forward. also %s-% stepping backwards. nice thing working_day can continue use date vectors.","code":"working_day <- stepper(on_weekends)  x %s+% working_day(c(1, -1)) #> [1] \"2019-12-23\" \"2019-12-20\" # A Wednesday wednesday <- as.Date(\"2019-12-18\")  # Returns Thursday, Friday, Monday wednesday %s+% working_day(1:3) #> [1] \"2019-12-19\" \"2019-12-20\" \"2019-12-23\""},{"path":"/dev/articles/almanac.html","id":"recurrence-rules","dir":"Articles","previous_headings":"","what":"Recurrence Rules","title":"Introduction to almanac","text":"recurrence rule structured object determines date counted event . basic level, job recurrence rule search pre-specified range dates flag event dates range. build recurrence rule, start base recurrence frequency. 4 frequencies choose : daily() weekly() monthly() yearly() Take yearly() frequency, example. default, declare 1 value per year event. return value yearly() rrule object, short “recurrence rule”. base object need start something useful. example, can pass rrule alma_search() along date, return events date range. want yearly value, want January 5th every year, rather 1st? yearly() important argument called since controls two things: start date recurrence rule, information month, day month use conditions specified override . default since set 1900-01-01, arbitrary (see almanac_since()). default example alma_search() get values January 1st. Let’s change . Now since date set 1990, try find yearly dates 1990, included. also argument yearly() controls upper bound range look . arbitrarily set 2100-01-01, can expanded contracted required (see almanac_until()).","code":"on_yearly <- yearly() on_yearly #> <rrule> #> • frequency: yearly #> • range: [1900-01-01, 2100-01-01] alma_search(from = \"1990-01-01\", to = \"1995-12-31\", on_yearly) #> [1] \"1990-01-01\" \"1991-01-01\" \"1992-01-01\" \"1993-01-01\" \"1994-01-01\" #> [6] \"1995-01-01\" on_yearly_jan_5 <- yearly(since = \"1990-01-05\")  alma_search(\"1990-01-01\", \"1995-12-31\", on_yearly_jan_5) #> [1] \"1990-01-05\" \"1991-01-05\" \"1992-01-05\" \"1993-01-05\" \"1994-01-05\" #> [6] \"1995-01-05\" # Same result as above, because the 1988 and 1989 dates are not included.  alma_search(\"1988-01-01\", \"1995-12-31\", on_yearly_jan_5) #> [1] \"1990-01-05\" \"1991-01-05\" \"1992-01-05\" \"1993-01-05\" \"1994-01-05\" #> [6] \"1995-01-05\""},{"path":"/dev/articles/almanac.html","id":"event-set","dir":"Articles","previous_headings":"","what":"Event Set","title":"Introduction to almanac","text":"mentioned earlier job recurrence rule flag dates pre-specified range events . dates flagged events known event set. previous example, used alma_search() extract subset dates event set . can get entire event set alma_events(). Notice bounded custom since date, default upper bound. Otherwise ’d infinite event set, nice theory bad practice. can also check existing date included recurrence rule’s event set alma_in().","code":"alma_events(on_yearly_jan_5) #>   [1] \"1990-01-05\" \"1991-01-05\" \"1992-01-05\" \"1993-01-05\" \"1994-01-05\" #>   [6] \"1995-01-05\" \"1996-01-05\" \"1997-01-05\" \"1998-01-05\" \"1999-01-05\" #>  [11] \"2000-01-05\" \"2001-01-05\" \"2002-01-05\" \"2003-01-05\" \"2004-01-05\" #>  [16] \"2005-01-05\" \"2006-01-05\" \"2007-01-05\" \"2008-01-05\" \"2009-01-05\" #>  [21] \"2010-01-05\" \"2011-01-05\" \"2012-01-05\" \"2013-01-05\" \"2014-01-05\" #>  [26] \"2015-01-05\" \"2016-01-05\" \"2017-01-05\" \"2018-01-05\" \"2019-01-05\" #>  [31] \"2020-01-05\" \"2021-01-05\" \"2022-01-05\" \"2023-01-05\" \"2024-01-05\" #>  [36] \"2025-01-05\" \"2026-01-05\" \"2027-01-05\" \"2028-01-05\" \"2029-01-05\" #>  [41] \"2030-01-05\" \"2031-01-05\" \"2032-01-05\" \"2033-01-05\" \"2034-01-05\" #>  [46] \"2035-01-05\" \"2036-01-05\" \"2037-01-05\" \"2038-01-05\" \"2039-01-05\" #>  [51] \"2040-01-05\" \"2041-01-05\" \"2042-01-05\" \"2043-01-05\" \"2044-01-05\" #>  [56] \"2045-01-05\" \"2046-01-05\" \"2047-01-05\" \"2048-01-05\" \"2049-01-05\" #>  [61] \"2050-01-05\" \"2051-01-05\" \"2052-01-05\" \"2053-01-05\" \"2054-01-05\" #>  [66] \"2055-01-05\" \"2056-01-05\" \"2057-01-05\" \"2058-01-05\" \"2059-01-05\" #>  [71] \"2060-01-05\" \"2061-01-05\" \"2062-01-05\" \"2063-01-05\" \"2064-01-05\" #>  [76] \"2065-01-05\" \"2066-01-05\" \"2067-01-05\" \"2068-01-05\" \"2069-01-05\" #>  [81] \"2070-01-05\" \"2071-01-05\" \"2072-01-05\" \"2073-01-05\" \"2074-01-05\" #>  [86] \"2075-01-05\" \"2076-01-05\" \"2077-01-05\" \"2078-01-05\" \"2079-01-05\" #>  [91] \"2080-01-05\" \"2081-01-05\" \"2082-01-05\" \"2083-01-05\" \"2084-01-05\" #>  [96] \"2085-01-05\" \"2086-01-05\" \"2087-01-05\" \"2088-01-05\" \"2089-01-05\" #> [101] \"2090-01-05\" \"2091-01-05\" \"2092-01-05\" \"2093-01-05\" \"2094-01-05\" #> [106] \"2095-01-05\" \"2096-01-05\" \"2097-01-05\" \"2098-01-05\" \"2099-01-05\" # Uses the 10th of the month, pulled from `since` on_monthly <- monthly(since = \"1990-01-10\")  x <- as.Date(\"2000-01-08\") + 0:5 x #> [1] \"2000-01-08\" \"2000-01-09\" \"2000-01-10\" \"2000-01-11\" \"2000-01-12\" #> [6] \"2000-01-13\"  x_in_set <- alma_in(x, on_monthly) x_in_set #> [1] FALSE FALSE  TRUE FALSE FALSE FALSE  x[x_in_set] #> [1] \"2000-01-10\""},{"path":"/dev/articles/almanac.html","id":"caching","dir":"Articles","previous_headings":"Event Set","what":"Caching","title":"Introduction to almanac","text":"almanac attempts smart caching event set recurrence rule first time queried. means first usage recurrence rule generally slower repeated uses.","code":"since <- \"1990-01-01\"  on_weekly <- weekly(since = since)  # The first time is \"slow\" system.time(alma_search(since, \"2000-01-01\", on_weekly)) #>    user  system elapsed  #>   0.105   0.001   0.060  # Repeated access is fast system.time(alma_search(since, \"2000-01-01\", on_weekly)) #>    user  system elapsed  #>       0       0       0  # The entire event set is cached, so even if you change the arguments, # the operation is still fast. system.time(alma_search(since, \"1990-05-01\", on_weekly)) #>    user  system elapsed  #>       0       0       0"},{"path":"/dev/articles/almanac.html","id":"recurrence-conditions","dir":"Articles","previous_headings":"","what":"Recurrence Conditions","title":"Introduction to almanac","text":"far worked base recurrence rules. Things get much interesting start adding extra conditions rules. Conditions ways limit expand given recurrence rule hone recurring dates particularly interested . condition functions almanac start recur_*(). example, let’s take monthly rule, defaults give us 1 day per month, expand give us every 4th 16th day month. important thing note even though since date first month, “overriding” recurrence condition, information used. Recurrence rules can continually added refine rule. add condition rule, get another rule back. Let’s try creating rule recurring holiday, Labor Day. recurs first Monday September, yearly. , : Use yearly() base since happens 1 time per year. Use recur_on_month_of_year() hone September. Use recur_on_day_of_week() hone first Monday month. nth argument recur_on_day_of_week() especially useful selecting end month. wanted last Monday September instead, :","code":"on_4th_and_16th <- monthly(since = \"2000-01-01\") %>%   recur_on_day_of_month(c(4, 16))  alma_search(\"2000-01-01\", \"2000-06-01\", on_4th_and_16th) #>  [1] \"2000-01-04\" \"2000-01-16\" \"2000-02-04\" \"2000-02-16\" \"2000-03-04\" #>  [6] \"2000-03-16\" \"2000-04-04\" \"2000-04-16\" \"2000-05-04\" \"2000-05-16\" on_labor_day <- yearly() %>%   recur_on_month_of_year(\"Sep\") %>%   recur_on_day_of_week(\"Monday\", nth = 1)  alma_search(\"2000-01-01\", \"2005-01-01\", on_labor_day) #> [1] \"2000-09-04\" \"2001-09-03\" \"2002-09-02\" \"2003-09-01\" \"2004-09-06\" on_last_monday_in_sept <- yearly(since = \"2000-01-01\") %>%   recur_on_month_of_year(\"Sep\") %>%   recur_on_day_of_week(\"Monday\", nth = -1)  alma_search(\"2000-01-01\", \"2005-01-01\", on_last_monday_in_sept) #> [1] \"2000-09-25\" \"2001-09-24\" \"2002-09-30\" \"2003-09-29\" \"2004-09-27\""},{"path":"/dev/articles/almanac.html","id":"recurrence-sets","dir":"Articles","previous_headings":"","what":"Recurrence Sets","title":"Introduction to almanac","text":"Recurrence rules powerful tools , aren’t enough solve every task. Say want construct rule includes Christmas Labor Day events. impossible construct kind event set using single rule, bundle multiple rules together, one Christmas one Labor Day, possible. rset bundle recurrence schedules. recurrence schedule, rschedule, overarching term rrules rsets. three types rsets almanac. create event set performing kind set operation event sets underlying rschedules added set. runion() takes union. rintersect() takes intersection. rsetdiff() takes set difference. useful rset runion, allows construct event set , example, falls multiple holidays weekends. following creates runion rrules based Christmas Labor Day. recurrence set critical data structure almanac. serves general container dump company’s holiday weekend recurrence rules.","code":"on_christmas <- yearly() %>%   recur_on_month_of_year(\"Dec\") %>%   recur_on_day_of_month(25)  christmas_or_labor_day <- runion(   on_christmas,   on_labor_day )  alma_search(\"2000-01-01\", \"2002-01-01\", christmas_or_labor_day) #> [1] \"2000-09-04\" \"2000-12-25\" \"2001-09-03\" \"2001-12-25\"  christmas_or_labor_day_except_2000_labor_day <- rsetdiff(   christmas_or_labor_day,    rcustom(\"2000-09-04\") )  alma_search(\"2000-01-01\", \"2002-01-01\", christmas_or_labor_day_except_2000_labor_day) #> [1] \"2000-12-25\" \"2001-09-03\" \"2001-12-25\""},{"path":"/dev/articles/holidays-calendars.html","id":"holidays","dir":"Articles","previous_headings":"","what":"Holidays","title":"Holidays and calendars","text":"number pre-generated holidays almanac, start hol_*(), hol_christmas(). holiday specific country, also prefixed , like hol_us_veterans_day() (currently global US holidays provided). holiday object just another type recurrence schedule: means can use alma_*() functions might learned vignettes. ’ll use holiday objects build calendar, bundle individual holidays represent rules specific business. 3 helpers specific holidays: hol_observe() hol_offset() hol_rename()","code":"on_christmas <- hol_christmas() on_christmas #> <Christmas> #>  <rrule> #>  • frequency: yearly #>  • range: [1900-01-01, 2100-01-01] #>  • month of year: Dec #>  • day of month: 25 alma_events(on_christmas, year = 2020:2025) #> [1] \"2020-12-25\" \"2021-12-25\" \"2022-12-25\" \"2023-12-25\" \"2024-12-25\" #> [6] \"2025-12-25\""},{"path":"/dev/articles/holidays-calendars.html","id":"hol_observe","dir":"Articles","previous_headings":"Holidays","what":"hol_observe()","title":"Holidays and calendars","text":"hol_observe() adjusts holiday respect observance rules might set company. example, Christmas falls Saturday, company may actually observe preceding Friday following Monday. ’ve read vignette(\"adjust--shift\"), ’ll recognize observances look similar radjusted(), fact tooling used hood. run updated holiday alma_events() , ’ll see now rolls nearest weekday Christmas falls weekend.","code":"on_christmas <- hol_christmas() %>%   hol_observe(adjust_on = on_weekends, adjustment = adj_nearest)  on_christmas #> <Christmas> #>  <radjusted> #>   adjust: #>   <rrule> #>   • frequency: yearly #>   • range: [1900-01-01, 2100-01-01] #>   • month of year: Dec #>   • day of month: 25 #>   adjust on: #>   <rrule> #>   • frequency: weekly #>   • range: [1900-01-01, 2100-01-01] #>   • day of week: Sat and Sun alma_events(on_christmas, year = 2020:2025) #> [1] \"2020-12-25\" \"2021-12-24\" \"2022-12-26\" \"2023-12-25\" \"2024-12-25\" #> [6] \"2025-12-25\""},{"path":"/dev/articles/holidays-calendars.html","id":"hol_offset","dir":"Articles","previous_headings":"Holidays","what":"hol_offset()","title":"Holidays and calendars","text":"hol_offset() allows create holidays relative holiday. example, Good Friday always Friday Easter. Let’s take look building holiday Boxing Day, day Christmas. hol_offset() retains name original holiday, ’ll also need hol_rename() rename Boxing Day: Great! Now wanted add observance rule Boxing Day? actually pretty complicated, dependent observance rules Christmas. example, Christmas falls Saturday, observed Friday, probably want Boxing Day observed following Monday. Christmas falls Sunday observed following Monday, Boxing Day observed following Tuesday. Luckily can layer hol_observe() hol_offset() build recurrence schedule matches rules looking :","code":"on_boxing_day <- hol_christmas() %>%   hol_offset(by = 1) %>%   hol_rename(\"Boxing Day\")  on_boxing_day #> <Boxing Day> #>  <roffset[by = 1]> #>   <rrule> #>   • frequency: yearly #>   • range: [1900-01-01, 2100-01-01] #>   • month of year: Dec #>   • day of month: 25 alma_events(on_boxing_day, year = 2020:2025) #> [1] \"2020-12-26\" \"2021-12-26\" \"2022-12-26\" \"2023-12-26\" \"2024-12-26\" #> [6] \"2025-12-26\" on_christmas <- hol_christmas() %>%   hol_observe(adjust_on = on_weekends, adjustment = adj_nearest)  on_boxing_day <- hol_christmas() %>%   hol_observe(adjust_on = on_weekends, adjustment = adj_nearest) %>%   hol_offset(by = 1) %>%   hol_observe(adjust_on = on_weekends, adjustment = adj_following) %>%   hol_rename(\"Boxing Day\") df <- data.frame(   christmas = alma_events(on_christmas, year = 2020:2025),   boxing_day = alma_events(on_boxing_day, year = 2020:2025) ) df$christmas_weekday <- lubridate::wday(df$christmas, label = TRUE) df$boxing_day_weekday <- lubridate::wday(df$boxing_day, label = TRUE)  df #>    christmas boxing_day christmas_weekday boxing_day_weekday #> 1 2020-12-25 2020-12-28               Fri                Mon #> 2 2021-12-24 2021-12-27               Fri                Mon #> 3 2022-12-26 2022-12-27               Mon                Tue #> 4 2023-12-25 2023-12-26               Mon                Tue #> 5 2024-12-25 2024-12-26               Wed                Thu #> 6 2025-12-25 2025-12-26               Thu                Fri"},{"path":"/dev/articles/holidays-calendars.html","id":"custom-holidays","dir":"Articles","previous_headings":"Holidays","what":"Custom holidays","title":"Holidays and calendars","text":"almanac doesn’t attempt provide comprehensive set holidays. Instead, makes easy create using rholiday(). need recurrence rule aligns holiday date name. Let’s create one Canada Day, occurs July 1st year.","code":"hol_canada_day <- function(since = NULL, until = NULL) {   out <- yearly(since = since, until = until)   out <- recur_on_month_of_year(out, \"July\")   out <- recur_on_day_of_month(out, 1L)      rholiday(rschedule = out, name = \"Canada Day\") } hol_canada_day() #> <Canada Day> #>  <rrule> #>  • frequency: yearly #>  • range: [1900-01-01, 2100-01-01] #>  • month of year: Jul #>  • day of month: 1  alma_next(as.Date(\"2019-01-01\"), hol_canada_day()) #> [1] \"2019-07-01\""},{"path":"/dev/articles/holidays-calendars.html","id":"calendars","dir":"Articles","previous_headings":"","what":"Calendars","title":"Holidays and calendars","text":"Holidays great one operations, typically building business calendar ’ll need bundle multiple holidays together. , ’ll need calendar object. can create one providing holidays rcalendar(): Like holidays, calendars recurrence schedules work alma_*() functions, also special cal_*() API.","code":"cal <- rcalendar(   hol_christmas(),   hol_new_years_day(),   hol_canada_day() )  cal #> <rcalendar[3]> #> • Christmas #> • New Year's Day #> • Canada Day"},{"path":"/dev/articles/holidays-calendars.html","id":"cal_events","dir":"Articles","previous_headings":"Calendars","what":"cal_events()","title":"Holidays and calendars","text":"’d like generate holidays particular year, use cal_events(): similar alma_events(), two big differences: holiday name displayed along event date special support observance rules Note didn’t add observance rules original calendar, let’s go back adjust holidays roll weekends: Note holidays generated cal_events() different previous ones now respect observance rules holiday falls weekend. one observance related feature worth pointing . Let’s take look holidays 2011: New Year’s Day fell Saturday year, adjusted backwards preceding Friday, actually fell 2010. cal_events() smart enough know requesting “2011’s holidays,” New Year’s Day probably included even observed different year. don’t want behavior, can set observed = TRUE use observed year filtering year.","code":"cal_events(cal, year = 2023) #>             name       date #> 1 New Year's Day 2023-01-01 #> 2     Canada Day 2023-07-01 #> 3      Christmas 2023-12-25 cal <- rcalendar(   hol_christmas() %>%     hol_observe(adjust_on = on_weekends, adjustment = adj_nearest),   hol_new_years_day() %>%     hol_observe(adjust_on = on_weekends, adjustment = adj_nearest),   # Canada normally rolls their holidays forward to the following Monday   hol_canada_day() %>%     hol_observe(adjust_on = on_weekends, adjustment = adj_following) ) cal_events(cal, year = 2023) #>             name       date #> 1 New Year's Day 2023-01-02 #> 2     Canada Day 2023-07-03 #> 3      Christmas 2023-12-25 cal_events(cal, year = 2011) #>             name       date #> 1 New Year's Day 2010-12-31 #> 2     Canada Day 2011-07-01 #> 3      Christmas 2011-12-26 # New Year's Day is gone cal_events(cal, year = 2011, observed = TRUE) #>         name       date #> 1 Canada Day 2011-07-01 #> 2  Christmas 2011-12-26  # And is now listed twice here cal_events(cal, year = 2010, observed = TRUE) #>             name       date #> 1 New Year's Day 2010-01-01 #> 2     Canada Day 2010-07-01 #> 3      Christmas 2010-12-24 #> 4 New Year's Day 2010-12-31"},{"path":"/dev/articles/holidays-calendars.html","id":"cal_match","dir":"Articles","previous_headings":"Calendars","what":"cal_match()","title":"Holidays and calendars","text":"’ve ever needed determine date holiday, ’ve likely reached alma_in(), works like %% returns logical vector. also need determine holiday date corresponded , ’ll need use cal_match() instead: Note calendar observance rules baked , shows 2010-12-31 (Friday) New Year’s Day rather 1st year (Saturday).","code":"x <- as.Date(c(   \"2019-12-25\",   \"2019-12-26\",   \"2010-12-31\",   \"2011-01-01\" ))  data.frame(   x = x,   name = cal_match(x, cal) ) #>            x           name #> 1 2019-12-25      Christmas #> 2 2019-12-26           <NA> #> 3 2010-12-31 New Year's Day #> 4 2011-01-01           <NA>"},{"path":"/dev/articles/holidays-calendars.html","id":"us-federal-calendar","dir":"Articles","previous_headings":"Calendars","what":"US federal calendar","title":"Holidays and calendars","text":"almanac comes one pre-built calendar, cal_us_federal(), contains federally recognized holidays United States. meant serve example can build almanac, also pretty useful : Note calendar doesn’t claim historically accurate, intended representation current federally recognized holidays. can build historically accurate calendars (.e. can represent Juneteenth wasn’t celebrated 2021) just takes bit effort.","code":"cal_us_federal() #> <rcalendar[11]> #> • New Year's Day #> • US Martin Luther King Jr. Day #> • US Presidents' Day #> • US Memorial Day #> • US Juneteenth #> • US Independence Day #> • US Labor Day #> • US Indigenous Peoples' Day #> • US Veterans Day #> • US Thanksgiving #> • Christmas cal_events(cal_us_federal(), year = 2023) #>                             name       date #> 1                 New Year's Day 2023-01-02 #> 2  US Martin Luther King Jr. Day 2023-01-16 #> 3             US Presidents' Day 2023-02-20 #> 4                US Memorial Day 2023-05-29 #> 5                  US Juneteenth 2023-06-19 #> 6            US Independence Day 2023-07-04 #> 7                   US Labor Day 2023-09-04 #> 8     US Indigenous Peoples' Day 2023-10-09 #> 9                US Veterans Day 2023-11-10 #> 10               US Thanksgiving 2023-11-23 #> 11                     Christmas 2023-12-25"},{"path":"/dev/articles/icalendar.html","id":"daily-for-10-events","dir":"Articles","previous_headings":"","what":"Daily for 10 events","title":"iCalendar specification","text":"","code":"rrule <- daily(since) %>%   recur_for_count(10)  alma_search(since, to, rrule) #>  [1] \"1997-09-02\" \"1997-09-03\" \"1997-09-04\" \"1997-09-05\" \"1997-09-06\" #>  [6] \"1997-09-07\" \"1997-09-08\" \"1997-09-09\" \"1997-09-10\" \"1997-09-11\""},{"path":"/dev/articles/icalendar.html","id":"daily-until-1997-12-24","dir":"Articles","previous_headings":"","what":"Daily until 1997-12-24","title":"iCalendar specification","text":"","code":"rrule <- daily(since, until = \"1997-12-24\")  alma_search(since, to, rrule) #>   [1] \"1997-09-02\" \"1997-09-03\" \"1997-09-04\" \"1997-09-05\" \"1997-09-06\" #>   [6] \"1997-09-07\" \"1997-09-08\" \"1997-09-09\" \"1997-09-10\" \"1997-09-11\" #>  [11] \"1997-09-12\" \"1997-09-13\" \"1997-09-14\" \"1997-09-15\" \"1997-09-16\" #>  [16] \"1997-09-17\" \"1997-09-18\" \"1997-09-19\" \"1997-09-20\" \"1997-09-21\" #>  [21] \"1997-09-22\" \"1997-09-23\" \"1997-09-24\" \"1997-09-25\" \"1997-09-26\" #>  [26] \"1997-09-27\" \"1997-09-28\" \"1997-09-29\" \"1997-09-30\" \"1997-10-01\" #>  [31] \"1997-10-02\" \"1997-10-03\" \"1997-10-04\" \"1997-10-05\" \"1997-10-06\" #>  [36] \"1997-10-07\" \"1997-10-08\" \"1997-10-09\" \"1997-10-10\" \"1997-10-11\" #>  [41] \"1997-10-12\" \"1997-10-13\" \"1997-10-14\" \"1997-10-15\" \"1997-10-16\" #>  [46] \"1997-10-17\" \"1997-10-18\" \"1997-10-19\" \"1997-10-20\" \"1997-10-21\" #>  [51] \"1997-10-22\" \"1997-10-23\" \"1997-10-24\" \"1997-10-25\" \"1997-10-26\" #>  [56] \"1997-10-27\" \"1997-10-28\" \"1997-10-29\" \"1997-10-30\" \"1997-10-31\" #>  [61] \"1997-11-01\" \"1997-11-02\" \"1997-11-03\" \"1997-11-04\" \"1997-11-05\" #>  [66] \"1997-11-06\" \"1997-11-07\" \"1997-11-08\" \"1997-11-09\" \"1997-11-10\" #>  [71] \"1997-11-11\" \"1997-11-12\" \"1997-11-13\" \"1997-11-14\" \"1997-11-15\" #>  [76] \"1997-11-16\" \"1997-11-17\" \"1997-11-18\" \"1997-11-19\" \"1997-11-20\" #>  [81] \"1997-11-21\" \"1997-11-22\" \"1997-11-23\" \"1997-11-24\" \"1997-11-25\" #>  [86] \"1997-11-26\" \"1997-11-27\" \"1997-11-28\" \"1997-11-29\" \"1997-11-30\" #>  [91] \"1997-12-01\" \"1997-12-02\" \"1997-12-03\" \"1997-12-04\" \"1997-12-05\" #>  [96] \"1997-12-06\" \"1997-12-07\" \"1997-12-08\" \"1997-12-09\" \"1997-12-10\" #> [101] \"1997-12-11\" \"1997-12-12\" \"1997-12-13\" \"1997-12-14\" \"1997-12-15\" #> [106] \"1997-12-16\" \"1997-12-17\" \"1997-12-18\" \"1997-12-19\" \"1997-12-20\" #> [111] \"1997-12-21\" \"1997-12-22\" \"1997-12-23\" \"1997-12-24\""},{"path":"/dev/articles/icalendar.html","id":"every-other-day-forever","dir":"Articles","previous_headings":"","what":"Every other day, forever","title":"iCalendar specification","text":"","code":"rrule <- daily(since) %>%   recur_on_interval(2)  alma_search(since, \"1997-10-01\", rrule) #>  [1] \"1997-09-02\" \"1997-09-04\" \"1997-09-06\" \"1997-09-08\" \"1997-09-10\" #>  [6] \"1997-09-12\" \"1997-09-14\" \"1997-09-16\" \"1997-09-18\" \"1997-09-20\" #> [11] \"1997-09-22\" \"1997-09-24\" \"1997-09-26\" \"1997-09-28\" \"1997-09-30\""},{"path":"/dev/articles/icalendar.html","id":"every-10-days-5-events","dir":"Articles","previous_headings":"","what":"Every 10 days, 5 events","title":"iCalendar specification","text":"","code":"rrule <- daily(since) %>%   recur_on_interval(10) %>%   recur_for_count(5)  alma_search(since, to, rrule) #> [1] \"1997-09-02\" \"1997-09-12\" \"1997-09-22\" \"1997-10-02\" \"1997-10-12\""},{"path":"/dev/articles/icalendar.html","id":"every-day-in-january-for-3-years","dir":"Articles","previous_headings":"","what":"Every day in January, for 3 years","title":"iCalendar specification","text":"","code":"rrule <- daily(since = \"1998-01-01\", until = \"2000-01-31\") %>%   recur_on_month_of_year(\"January\")  alma_search(since, to, rrule) #>  [1] \"1998-01-01\" \"1998-01-02\" \"1998-01-03\" \"1998-01-04\" \"1998-01-05\" #>  [6] \"1998-01-06\" \"1998-01-07\" \"1998-01-08\" \"1998-01-09\" \"1998-01-10\" #> [11] \"1998-01-11\" \"1998-01-12\" \"1998-01-13\" \"1998-01-14\" \"1998-01-15\" #> [16] \"1998-01-16\" \"1998-01-17\" \"1998-01-18\" \"1998-01-19\" \"1998-01-20\" #> [21] \"1998-01-21\" \"1998-01-22\" \"1998-01-23\" \"1998-01-24\" \"1998-01-25\" #> [26] \"1998-01-26\" \"1998-01-27\" \"1998-01-28\" \"1998-01-29\" \"1998-01-30\" #> [31] \"1998-01-31\" \"1999-01-01\" \"1999-01-02\" \"1999-01-03\" \"1999-01-04\" #> [36] \"1999-01-05\" \"1999-01-06\" \"1999-01-07\" \"1999-01-08\" \"1999-01-09\" #> [41] \"1999-01-10\" \"1999-01-11\" \"1999-01-12\" \"1999-01-13\" \"1999-01-14\" #> [46] \"1999-01-15\" \"1999-01-16\" \"1999-01-17\" \"1999-01-18\" \"1999-01-19\" #> [51] \"1999-01-20\" \"1999-01-21\" \"1999-01-22\" \"1999-01-23\" \"1999-01-24\" #> [56] \"1999-01-25\" \"1999-01-26\" \"1999-01-27\" \"1999-01-28\" \"1999-01-29\" #> [61] \"1999-01-30\" \"1999-01-31\" \"2000-01-01\" \"2000-01-02\" \"2000-01-03\" #> [66] \"2000-01-04\" \"2000-01-05\" \"2000-01-06\" \"2000-01-07\" \"2000-01-08\" #> [71] \"2000-01-09\" \"2000-01-10\" \"2000-01-11\" \"2000-01-12\" \"2000-01-13\" #> [76] \"2000-01-14\" \"2000-01-15\" \"2000-01-16\" \"2000-01-17\" \"2000-01-18\" #> [81] \"2000-01-19\" \"2000-01-20\" \"2000-01-21\" \"2000-01-22\" \"2000-01-23\" #> [86] \"2000-01-24\" \"2000-01-25\" \"2000-01-26\" \"2000-01-27\" \"2000-01-28\" #> [91] \"2000-01-29\" \"2000-01-30\" \"2000-01-31\""},{"path":"/dev/articles/icalendar.html","id":"weekly-for-10-events","dir":"Articles","previous_headings":"","what":"Weekly for 10 events","title":"iCalendar specification","text":"","code":"rrule <- weekly(since) %>%   recur_for_count(10)  alma_search(since, to, rrule) #>  [1] \"1997-09-02\" \"1997-09-09\" \"1997-09-16\" \"1997-09-23\" \"1997-09-30\" #>  [6] \"1997-10-07\" \"1997-10-14\" \"1997-10-21\" \"1997-10-28\" \"1997-11-04\""},{"path":"/dev/articles/icalendar.html","id":"weekly-until-december-24-1997","dir":"Articles","previous_headings":"","what":"Weekly until December 24, 1997","title":"iCalendar specification","text":"","code":"rrule <- weekly(since, until = \"1997-12-24\")  alma_search(since, to, rrule) #>  [1] \"1997-09-02\" \"1997-09-09\" \"1997-09-16\" \"1997-09-23\" \"1997-09-30\" #>  [6] \"1997-10-07\" \"1997-10-14\" \"1997-10-21\" \"1997-10-28\" \"1997-11-04\" #> [11] \"1997-11-11\" \"1997-11-18\" \"1997-11-25\" \"1997-12-02\" \"1997-12-09\" #> [16] \"1997-12-16\" \"1997-12-23\""},{"path":"/dev/articles/icalendar.html","id":"every-other-week---forever","dir":"Articles","previous_headings":"","what":"Every other week - forever","title":"iCalendar specification","text":"","code":"rrule <- weekly(since) %>%   recur_on_interval(2)  alma_search(since, \"1997-11-01\", rrule) #> [1] \"1997-09-02\" \"1997-09-16\" \"1997-09-30\" \"1997-10-14\" \"1997-10-28\""},{"path":"/dev/articles/icalendar.html","id":"weekly-on-tuesday-and-thursday-for-five-weeks","dir":"Articles","previous_headings":"","what":"Weekly on Tuesday and Thursday for five weeks","title":"iCalendar specification","text":"","code":"rrule <- weekly(since) %>%   recur_on_day_of_week(c(\"Tue\", \"Thur\")) %>%   recur_for_count(10)  alma_search(since, to, rrule) #>  [1] \"1997-09-02\" \"1997-09-04\" \"1997-09-09\" \"1997-09-11\" \"1997-09-16\" #>  [6] \"1997-09-18\" \"1997-09-23\" \"1997-09-25\" \"1997-09-30\" \"1997-10-02\""},{"path":"/dev/articles/icalendar.html","id":"every-other-week-on-monday-wednesday-and-friday-until-december-24-1997-starting-on-monday-september-1-1997","dir":"Articles","previous_headings":"","what":"Every other week on Monday, Wednesday, and Friday until December 24, 1997, starting on Monday, September 1, 1997","title":"iCalendar specification","text":"","code":"rrule <- weekly(since = \"1997-09-01\", until = \"1997-12-24\") %>%   recur_on_day_of_week(c(\"Mon\", \"Wed\", \"Fri\")) %>%   recur_on_interval(2)  alma_search(\"1997-09-01\", to, rrule) #>  [1] \"1997-09-01\" \"1997-09-03\" \"1997-09-05\" \"1997-09-15\" \"1997-09-17\" #>  [6] \"1997-09-19\" \"1997-09-29\" \"1997-10-01\" \"1997-10-03\" \"1997-10-13\" #> [11] \"1997-10-15\" \"1997-10-17\" \"1997-10-27\" \"1997-10-29\" \"1997-10-31\" #> [16] \"1997-11-10\" \"1997-11-12\" \"1997-11-14\" \"1997-11-24\" \"1997-11-26\" #> [21] \"1997-11-28\" \"1997-12-08\" \"1997-12-10\" \"1997-12-12\" \"1997-12-22\" #> [26] \"1997-12-24\""},{"path":"/dev/articles/icalendar.html","id":"every-other-week-on-tuesday-and-thursday-for-8-events","dir":"Articles","previous_headings":"","what":"Every other week on Tuesday and Thursday, for 8 events","title":"iCalendar specification","text":"","code":"rrule <- weekly(since) %>%   recur_on_day_of_week(c(\"Tue\", \"Thu\")) %>%   recur_on_interval(2) %>%   recur_for_count(8)  alma_search(since, to, rrule) #> [1] \"1997-09-02\" \"1997-09-04\" \"1997-09-16\" \"1997-09-18\" \"1997-09-30\" #> [6] \"1997-10-02\" \"1997-10-14\" \"1997-10-16\""},{"path":"/dev/articles/icalendar.html","id":"monthly-on-the-first-friday-for-10-events","dir":"Articles","previous_headings":"","what":"Monthly on the first Friday for 10 events","title":"iCalendar specification","text":"","code":"rrule <- monthly(\"1997-09-05\") %>%   recur_on_day_of_week(\"Fri\", nth = 1) %>%   recur_for_count(10)  alma_search(since, to, rrule) #>  [1] \"1997-09-05\" \"1997-10-03\" \"1997-11-07\" \"1997-12-05\" \"1998-01-02\" #>  [6] \"1998-02-06\" \"1998-03-06\" \"1998-04-03\" \"1998-05-01\" \"1998-06-05\""},{"path":"/dev/articles/icalendar.html","id":"monthly-on-the-first-friday-until-december-24-1997","dir":"Articles","previous_headings":"","what":"Monthly on the first Friday until December 24, 1997","title":"iCalendar specification","text":"","code":"rrule <- monthly(since = \"1997-09-05\", until = \"1997-12-24\") %>%   recur_on_day_of_week(\"Fri\", nth = 1)  alma_search(since, to, rrule) #> [1] \"1997-09-05\" \"1997-10-03\" \"1997-11-07\" \"1997-12-05\""},{"path":"/dev/articles/icalendar.html","id":"every-other-month-on-the-first-and-last-sunday-of-the-month-for-10-events","dir":"Articles","previous_headings":"","what":"Every other month on the first and last Sunday of the month for 10 events","title":"iCalendar specification","text":"","code":"rrule <- monthly(\"1997-09-07\") %>%   recur_on_day_of_week(\"Sun\", nth = c(1, -1)) %>%   recur_on_interval(2) %>%   recur_for_count(10)  alma_search(since, to, rrule) #>  [1] \"1997-09-07\" \"1997-09-28\" \"1997-11-02\" \"1997-11-30\" \"1998-01-04\" #>  [6] \"1998-01-25\" \"1998-03-01\" \"1998-03-29\" \"1998-05-03\" \"1998-05-31\""},{"path":"/dev/articles/icalendar.html","id":"monthly-on-the-second-to-last-monday-of-the-month-for-6-months","dir":"Articles","previous_headings":"","what":"Monthly on the second-to-last Monday of the month for 6 months","title":"iCalendar specification","text":"","code":"rrule <- monthly(\"1997-09-22\") %>%   recur_on_day_of_week(\"Mon\", nth = -2) %>%   recur_for_count(6)  alma_search(since, to, rrule) #> [1] \"1997-09-22\" \"1997-10-20\" \"1997-11-17\" \"1997-12-22\" \"1998-01-19\" #> [6] \"1998-02-16\""},{"path":"/dev/articles/icalendar.html","id":"monthly-on-the-third-to-the-last-day-of-the-month-forever","dir":"Articles","previous_headings":"","what":"Monthly on the third-to-the-last day of the month, forever","title":"iCalendar specification","text":"","code":"rrule <- monthly(\"1997-09-28\") %>%   recur_on_day_of_month(-3)  alma_search(since, \"1997-12-01\", rrule) #> [1] \"1997-09-28\" \"1997-10-29\" \"1997-11-28\""},{"path":"/dev/articles/icalendar.html","id":"monthly-on-the-2nd-and-15th-of-the-month-for-10-events","dir":"Articles","previous_headings":"","what":"Monthly on the 2nd and 15th of the month for 10 events","title":"iCalendar specification","text":"","code":"rrule <- monthly(\"1997-09-02\") %>%   recur_on_day_of_month(c(2, 15)) %>%   recur_for_count(10)  alma_search(since, to, rrule) #>  [1] \"1997-09-02\" \"1997-09-15\" \"1997-10-02\" \"1997-10-15\" \"1997-11-02\" #>  [6] \"1997-11-15\" \"1997-12-02\" \"1997-12-15\" \"1998-01-02\" \"1998-01-15\""},{"path":"/dev/articles/icalendar.html","id":"monthly-on-the-first-and-last-day-of-the-month-for-10-events","dir":"Articles","previous_headings":"","what":"Monthly on the first and last day of the month for 10 events","title":"iCalendar specification","text":"","code":"rrule <- monthly(\"1997-09-30\") %>%   recur_on_day_of_month(c(1, -1)) %>%   recur_for_count(10)  alma_search(since, to, rrule) #>  [1] \"1997-09-30\" \"1997-10-01\" \"1997-10-31\" \"1997-11-01\" \"1997-11-30\" #>  [6] \"1997-12-01\" \"1997-12-31\" \"1998-01-01\" \"1998-01-31\" \"1998-02-01\""},{"path":"/dev/articles/icalendar.html","id":"every-18-months-on-the-10th-thru-15th-of-the-month-for-10-events","dir":"Articles","previous_headings":"","what":"Every 18 months on the 10th thru 15th of the month for 10 events","title":"iCalendar specification","text":"","code":"rrule <- monthly(\"1997-09-10\") %>%   recur_on_interval(18) %>%   recur_on_day_of_month(10:15) %>%   recur_for_count(10)  alma_search(\"1997-09-10\", to, rrule) #>  [1] \"1997-09-10\" \"1997-09-11\" \"1997-09-12\" \"1997-09-13\" \"1997-09-14\" #>  [6] \"1997-09-15\" \"1999-03-10\" \"1999-03-11\" \"1999-03-12\" \"1999-03-13\""},{"path":"/dev/articles/icalendar.html","id":"every-tuesday-every-other-month","dir":"Articles","previous_headings":"","what":"Every Tuesday, every other month","title":"iCalendar specification","text":"","code":"rrule <- monthly(since) %>%   recur_on_interval(2) %>%   recur_on_day_of_week(\"Tuesday\")  alma_search(since, \"1997-12-01\", rrule) #> [1] \"1997-09-02\" \"1997-09-09\" \"1997-09-16\" \"1997-09-23\" \"1997-09-30\" #> [6] \"1997-11-04\" \"1997-11-11\" \"1997-11-18\" \"1997-11-25\""},{"path":"/dev/articles/icalendar.html","id":"yearly-in-june-and-july-for-10-events","dir":"Articles","previous_headings":"","what":"Yearly in June and July for 10 events","title":"iCalendar specification","text":"Note day month taken since date, since otherwise specified!","code":"rrule <- yearly(\"1997-06-10\") %>%   recur_on_month_of_year(c(\"June\", \"July\")) %>%   recur_for_count(10)  alma_search(\"1997-06-10\", to, rrule) #>  [1] \"1997-06-10\" \"1997-07-10\" \"1998-06-10\" \"1998-07-10\" \"1999-06-10\" #>  [6] \"1999-07-10\" \"2000-06-10\" \"2000-07-10\" \"2001-06-10\" \"2001-07-10\""},{"path":"/dev/articles/icalendar.html","id":"every-other-year-on-january-february-and-march-for-10-events","dir":"Articles","previous_headings":"","what":"Every other year on January, February, and March for 10 events","title":"iCalendar specification","text":"","code":"rrule <- yearly(\"1997-03-10\") %>%   recur_on_month_of_year(c(\"Jan\", \"Feb\", \"Mar\")) %>%   recur_on_interval(2) %>%   recur_for_count(10)  alma_search(\"1997-03-10\", to, rrule) #>  [1] \"1997-03-10\" \"1999-01-10\" \"1999-02-10\" \"1999-03-10\" \"2001-01-10\" #>  [6] \"2001-02-10\" \"2001-03-10\" \"2003-01-10\" \"2003-02-10\" \"2003-03-10\""},{"path":"/dev/articles/icalendar.html","id":"every-third-year-on-the-1st-100th-and-200th-day-for-10-events","dir":"Articles","previous_headings":"","what":"Every third year on the 1st, 100th, and 200th day for 10 events","title":"iCalendar specification","text":"","code":"rrule <- yearly(\"1997-01-01\") %>%   recur_on_day_of_year(c(1, 100, 200)) %>%   recur_on_interval(3) %>%   recur_for_count(10)  alma_search(\"1997-01-01\", to, rrule) #>  [1] \"1997-01-01\" \"1997-04-10\" \"1997-07-19\" \"2000-01-01\" \"2000-04-09\" #>  [6] \"2000-07-18\" \"2003-01-01\" \"2003-04-10\" \"2003-07-19\" \"2006-01-01\""},{"path":"/dev/articles/icalendar.html","id":"every-20th-monday-of-the-year-forever","dir":"Articles","previous_headings":"","what":"Every 20th Monday of the year, forever","title":"iCalendar specification","text":"","code":"rrule <- yearly(\"1997-05-19\") %>%   recur_on_day_of_week(\"Monday\", nth = 20)  alma_search(\"1997-05-19\", \"2000-01-01\", rrule) #> [1] \"1997-05-19\" \"1998-05-18\" \"1999-05-17\""},{"path":"/dev/articles/icalendar.html","id":"monday-of-week-number-20-where-the-default-start-of-the-week-is-monday-forever","dir":"Articles","previous_headings":"","what":"Monday of week number 20 (where the default start of the week is Monday), forever","title":"iCalendar specification","text":"Default week start almanac Monday.","code":"rrule <- yearly(\"1997-05-12\") %>%   recur_on_week_of_year(20) %>%   recur_on_day_of_week(\"Monday\")  alma_search(\"1997-05-12\", \"2000-01-01\", rrule) #> [1] \"1997-05-12\" \"1998-05-11\" \"1999-05-17\""},{"path":"/dev/articles/icalendar.html","id":"every-thursday-in-march-forever","dir":"Articles","previous_headings":"","what":"Every Thursday in March, forever","title":"iCalendar specification","text":"","code":"rrule <- yearly(\"1997-03-13\") %>%   recur_on_day_of_week(\"Thursday\") %>%   recur_on_month_of_year(\"March\")  alma_search(\"1997-03-13\", \"2000-01-01\", rrule) #>  [1] \"1997-03-13\" \"1997-03-20\" \"1997-03-27\" \"1998-03-05\" \"1998-03-12\" #>  [6] \"1998-03-19\" \"1998-03-26\" \"1999-03-04\" \"1999-03-11\" \"1999-03-18\" #> [11] \"1999-03-25\""},{"path":"/dev/articles/icalendar.html","id":"every-thursday-but-only-during-june-july-and-august-forever","dir":"Articles","previous_headings":"","what":"Every Thursday, but only during June, July, and August, forever","title":"iCalendar specification","text":"","code":"rrule <- yearly(\"1997-06-05\") %>%   recur_on_day_of_week(\"Thursday\") %>%   recur_on_month_of_year(c(\"Jun\", \"July\", \"Aug\"))  alma_search(\"1997-06-05\", \"1999-01-01\", rrule) #>  [1] \"1997-06-05\" \"1997-06-12\" \"1997-06-19\" \"1997-06-26\" \"1997-07-03\" #>  [6] \"1997-07-10\" \"1997-07-17\" \"1997-07-24\" \"1997-07-31\" \"1997-08-07\" #> [11] \"1997-08-14\" \"1997-08-21\" \"1997-08-28\" \"1998-06-04\" \"1998-06-11\" #> [16] \"1998-06-18\" \"1998-06-25\" \"1998-07-02\" \"1998-07-09\" \"1998-07-16\" #> [21] \"1998-07-23\" \"1998-07-30\" \"1998-08-06\" \"1998-08-13\" \"1998-08-20\" #> [26] \"1998-08-27\""},{"path":"/dev/articles/icalendar.html","id":"every-friday-the-13th-forever","dir":"Articles","previous_headings":"","what":"Every Friday the 13th, forever","title":"iCalendar specification","text":"","code":"rrule <- yearly(since) %>%   recur_on_day_of_week(\"Friday\") %>%   recur_on_day_of_month(13)  alma_search(since, \"2001-01-01\", rrule) #> [1] \"1998-02-13\" \"1998-03-13\" \"1998-11-13\" \"1999-08-13\" \"2000-10-13\""},{"path":"/dev/articles/icalendar.html","id":"the-first-saturday-that-follows-the-first-sunday-of-the-month-forever","dir":"Articles","previous_headings":"","what":"The first Saturday that follows the first Sunday of the month, forever","title":"iCalendar specification","text":"","code":"rrule <- yearly(\"1997-09-13\") %>%   recur_on_day_of_week(\"Saturday\") %>%   recur_on_day_of_month(7:13)  alma_search(\"1997-09-13\", \"1998-06-01\", rrule) #> [1] \"1997-09-13\" \"1997-10-11\" \"1997-11-08\" \"1997-12-13\" \"1998-01-10\" #> [6] \"1998-02-07\" \"1998-03-07\" \"1998-04-11\" \"1998-05-09\""},{"path":"/dev/articles/icalendar.html","id":"every-4-years-the-first-tuesday-after-a-monday-in-november-forever-u-s--presidential-election-day","dir":"Articles","previous_headings":"","what":"Every 4 years, the first Tuesday after a Monday in November, forever (U.S. Presidential Election day)","title":"iCalendar specification","text":"","code":"rrule <- yearly(\"1996-11-05\") %>%   recur_on_day_of_week(\"Tuesday\") %>%   recur_on_day_of_month(2:8) %>%   recur_on_interval(4) %>%   recur_on_month_of_year(\"November\")  alma_search(\"1996-11-05\", \"2010-12-31\", rrule) #> [1] \"1996-11-05\" \"2000-11-07\" \"2004-11-02\" \"2008-11-04\""},{"path":"/dev/articles/icalendar.html","id":"the-third-instance-into-the-month-of-one-of-tuesday-wednesday-or-thursday-for-the-next-3-months","dir":"Articles","previous_headings":"","what":"The third instance into the month of one of Tuesday, Wednesday, or Thursday, for the next 3 months","title":"iCalendar specification","text":"recur_on_position() incredibly powerful tool, allowing select position within frequency. selects third element monthly set, monthly set contains Tuesday, Wednesday, Thursdays month.","code":"rrule <- monthly(\"1997-09-04\") %>%   recur_on_day_of_week(c(\"Tue\", \"Wed\", \"Thu\")) %>%   recur_on_position(3) %>%   recur_for_count(3)  alma_search(\"1997-09-04\", to, rrule) #> [1] \"1997-09-04\" \"1997-10-07\" \"1997-11-06\""},{"path":"/dev/articles/icalendar.html","id":"the-second-to-last-weekday-of-the-month","dir":"Articles","previous_headings":"","what":"The second-to-last weekday of the month","title":"iCalendar specification","text":"","code":"rrule <- monthly(\"1997-09-29\") %>%   recur_on_day_of_week(1:5) %>%   recur_on_position(-2)  alma_search(\"1997-09-29\", \"1998-12-01\", rrule) #>  [1] \"1997-09-29\" \"1997-10-30\" \"1997-11-27\" \"1997-12-30\" \"1998-01-29\" #>  [6] \"1998-02-26\" \"1998-03-30\" \"1998-04-29\" \"1998-05-28\" \"1998-06-29\" #> [11] \"1998-07-30\" \"1998-08-28\" \"1998-09-29\" \"1998-10-29\" \"1998-11-27\""},{"path":"/dev/articles/icalendar.html","id":"an-example-where-the-days-generated-makes-a-difference-because-of-week_start","dir":"Articles","previous_headings":"","what":"An example where the days generated makes a difference because of week_start","title":"iCalendar specification","text":"Changing week start Sunday.","code":"rrule <- weekly(\"1997-08-05\") %>%   recur_on_interval(2) %>%   recur_for_count(4) %>%   recur_on_day_of_week(c(\"Tue\", \"Sun\")) %>%   recur_with_week_start(\"Monday\")  # Week 1: 1997-08-04 -> 1997-08-10 # Week 2: 1997-08-11 -> 1997-08-17 (skipped) # Week 3: 1997-08-18 -> 1997-08-24  alma_search(\"1997-08-05\", \"1998-12-01\", rrule) #> [1] \"1997-08-05\" \"1997-08-10\" \"1997-08-19\" \"1997-08-24\" rrule <- weekly(\"1997-08-05\") %>%   recur_on_interval(2) %>%   recur_for_count(4) %>%   recur_on_day_of_week(c(\"Tue\", \"Sun\")) %>%   recur_with_week_start(\"Sunday\")  # Week 1: 1997-08-03 -> 1997-08-09 # Week 2: 1997-08-10 -> 1997-08-16 (skipped) # Week 3: 1997-08-17 -> 1997-08-23 # Week 4: 1997-08-24 -> 1997-08-30 (skipped) # Week 5: 1997-08-31 -> 1997-09-06 alma_search(\"1997-08-05\", \"1998-12-01\", rrule) #> [1] \"1997-08-05\" \"1997-08-17\" \"1997-08-19\" \"1997-08-31\""},{"path":"/dev/articles/icalendar.html","id":"an-example-where-an-invalid-date-i-e--february-30-is-ignored","dir":"Articles","previous_headings":"","what":"An example where an invalid date (i.e., February 30) is ignored","title":"iCalendar specification","text":"Invalid dates decrease total count.","code":"rrule <- weekly(\"2007-01-15\") %>%   recur_on_day_of_month(c(15, 30)) %>%   recur_for_count(5)  alma_search(\"2007-01-15\", \"2007-12-31\", rrule) #> [1] \"2007-01-15\" \"2007-01-30\" \"2007-02-15\" \"2007-03-15\" \"2007-03-30\""},{"path":"/dev/articles/quarterly.html","id":"first-day-of-the-quarter","dir":"Articles","previous_headings":"","what":"First day of the quarter","title":"Quarterly rules","text":"one particularly easy, reason bit misleading. Let’s show first: Whenever need “first” event per quarter, good chance event fall first month quarter, case . Whenever guarantee event falls first month quarter, can computed start month, can probably just use monthly() %>% recur_on_interval(3) get quarterly values.","code":"on_first_day_of_quarter <- monthly(since = \"2000-01-01\") %>%   recur_on_interval(3) %>%   recur_on_day_of_month(1)  alma_search(\"2000-01-01\", \"2002-01-01\", on_first_day_of_quarter) #> [1] \"2000-01-01\" \"2000-04-01\" \"2000-07-01\" \"2000-10-01\" \"2001-01-01\" #> [6] \"2001-04-01\" \"2001-07-01\" \"2001-10-01\" \"2002-01-01\""},{"path":"/dev/articles/quarterly.html","id":"altering-the-fiscal-year-start","dir":"Articles","previous_headings":"","what":"Altering the fiscal year start","title":"Quarterly rules","text":"moving complex examples, want show general way change start fiscal year. means rather starting quarter January, start March. Remember since date used anchor date things like recur_on_interval(), chose since date March, recur different fiscal calendar.","code":"on_first_day_of_quarter_march_start <- monthly(since = \"2000-03-01\") %>%   recur_on_interval(3) %>%   recur_on_day_of_month(1)  alma_search(\"2000-01-01\", \"2002-01-01\", on_first_day_of_quarter_march_start) #> [1] \"2000-03-01\" \"2000-06-01\" \"2000-09-01\" \"2000-12-01\" \"2001-03-01\" #> [6] \"2001-06-01\" \"2001-09-01\" \"2001-12-01\""},{"path":"/dev/articles/quarterly.html","id":"n-th-day-of-the-quarter","dir":"Articles","previous_headings":"","what":"N-th day of the quarter","title":"Quarterly rules","text":"general case first example, happens want compute N-th day quarter, either front back? Unlike first example, longer guarantee date first month, count back really need entire set 3 months make quarter count correctly. secret break rule 4 smaller rules, one per quarter, can combine 1 larger quarterly runion. Let’s start concrete example Q1. can get 60th day quarter? breaks follows: Use yearly() frequency rather monthly() one. Recur 3 months make first quarter. Recur days month (isn’t problem month doesn’t day 30 31). gives us access ~90 days quarter (exact number varies per quarter). recur_on_position() can take nth day set. Using yearly() rather monthly() required recur_on_position() work correctly. recur_on_position() takes n-th position set, within frequency. chosen monthly try take 60th position within monthly set, isn’t wanted. rest quarterly rules straightforward . just change month year values. make usable, ’ll also wrap parameterized function, go ahead construct combined runion object four pieces. Let’s give whirl. can also select days end quarter, example, last day quarter: general strategy using base rule yearly() %>% recur_on_month_of_year(), plus usage recur_on_position() solved quarterly problems can think .","code":"on_60th_day_of_q1 <- yearly() %>%   recur_on_month_of_year(1:3) %>%   recur_on_day_of_month(1:31) %>%   recur_on_position(60)  alma_search(\"2000-01-01\", \"2002-01-01\", on_60th_day_of_q1) #> [1] \"2000-02-29\" \"2001-03-01\" make_on_nth_doq <- function(since = \"1970-01-01\", nth = 1L) {   all_days <- 1:31      on_nth_day_of_q1 <- yearly(since = since) %>%     recur_on_month_of_year(1:3) %>%     recur_on_day_of_month(all_days) %>%     recur_on_position(nth)      on_nth_day_of_q2 <- yearly(since = since) %>%     recur_on_month_of_year(4:6) %>%     recur_on_day_of_month(all_days) %>%     recur_on_position(nth)      on_nth_day_of_q3 <- yearly(since = since) %>%     recur_on_month_of_year(7:9) %>%     recur_on_day_of_month(all_days) %>%     recur_on_position(nth)        on_nth_day_of_q4 <- yearly(since = since) %>%     recur_on_month_of_year(10:12) %>%     recur_on_day_of_month(all_days) %>%     recur_on_position(nth)      on_nth_doq <- runion(     on_nth_day_of_q1,     on_nth_day_of_q2,     on_nth_day_of_q3,     on_nth_day_of_q4   )      on_nth_doq } on_60th_doq <- make_on_nth_doq(since = \"2000-01-01\", nth = 60)  alma_search(\"2000-01-01\", \"2002-01-01\", on_60th_doq) #> [1] \"2000-02-29\" \"2000-05-30\" \"2000-08-29\" \"2000-11-29\" \"2001-03-01\" #> [6] \"2001-05-30\" \"2001-08-29\" \"2001-11-29\" on_last_doq <- make_on_nth_doq(since = \"2000-01-01\", nth = -1)  alma_search(\"2000-01-01\", \"2002-01-01\", on_last_doq) #> [1] \"2000-03-31\" \"2000-06-30\" \"2000-09-30\" \"2000-12-31\" \"2001-03-31\" #> [6] \"2001-06-30\" \"2001-09-30\" \"2001-12-31\""},{"path":"/dev/articles/quarterly.html","id":"n-th-week-day-of-the-quarter","dir":"Articles","previous_headings":"","what":"N-th week day of the quarter","title":"Quarterly rules","text":"showcase strategy , let’s figure get nth week day quarter. , start Q1 first, time computing 6th Monday Q1. Multiple week days can used . Now generalize:","code":"since <- \"2000-01-01\" day <- \"Monday\" nth <- 6  on_6th_monday_of_q1 <- yearly(since = since) %>%   recur_on_month_of_year(1:3) %>%   recur_on_day_of_week(day) %>%   recur_on_position(nth)  alma_search(\"2000-01-01\", \"2002-01-01\", on_6th_monday_of_q1) #> [1] \"2000-02-07\" \"2001-02-05\" since <- \"2000-01-01\" day <- c(\"Monday\", \"Tuesday\") nth <- 19  on_19th_monday_or_tuesday_of_q1 <- yearly(since = since) %>%   recur_on_month_of_year(1:3) %>%   recur_on_day_of_week(day) %>%   recur_on_position(nth)  alma_search(\"2000-01-01\", \"2002-01-01\", on_19th_monday_or_tuesday_of_q1) #> [1] \"2000-03-06\" \"2001-03-05\" make_on_nth_day_of_week_of_the_quarter <- function(since = \"1970-01-01\",                                                     day = \"Monday\",                                                     nth = 1L) {   on_nth_of_q1 <- yearly(since = since) %>%     recur_on_month_of_year(1:3) %>%     recur_on_day_of_week(day) %>%     recur_on_position(nth)      on_nth_of_q2 <- yearly(since = since) %>%     recur_on_month_of_year(4:6) %>%     recur_on_day_of_week(day) %>%     recur_on_position(nth)      on_nth_of_q3 <- yearly(since = since) %>%     recur_on_month_of_year(7:9) %>%     recur_on_day_of_week(day) %>%     recur_on_position(nth)        on_nth_of_q4 <- yearly(since = since) %>%     recur_on_month_of_year(10:12) %>%     recur_on_day_of_week(day) %>%     recur_on_position(nth)      on_nth_of_the_quarter <- runion(     on_nth_of_q1,     on_nth_of_q2,     on_nth_of_q3,     on_nth_of_q4   )      on_nth_of_the_quarter } on_last_friday_of_the_quarter <- make_on_nth_day_of_week_of_the_quarter(   since = \"2000-01-01\",    day = \"Friday\",    nth = -1 )  fridays <- alma_search(\"2000-01-01\", \"2002-01-01\", on_last_friday_of_the_quarter) fridays #> [1] \"2000-03-31\" \"2000-06-30\" \"2000-09-29\" \"2000-12-29\" \"2001-03-30\" #> [6] \"2001-06-29\" \"2001-09-28\" \"2001-12-28\"  wday(fridays, label = TRUE) #> [1] Fri Fri Fri Fri Fri Fri Fri Fri #> Levels: Sun < Mon < Tue < Wed < Thu < Fri < Sat"},{"path":"/dev/articles/quarterly.html","id":"combining-with-other-rules","dir":"Articles","previous_headings":"","what":"Combining with other rules","title":"Quarterly rules","text":"Remember results just rsets can combined rules need create complex quarterly strategies. example, let’s take “last Friday quarter” runion combine rule “every Wednesday”.","code":"on_wednesdays <- weekly() %>%   recur_on_day_of_week(\"Wednesday\")  on_last_friday_of_quarter_or_wednesdays <- runion(   on_wednesdays,   on_last_friday_of_the_quarter )  last_friday_or_wednesdays <- alma_search(   \"2000-01-01\", \"2002-01-01\",    on_last_friday_of_quarter_or_wednesdays )  last_friday_or_wednesdays[1:15] #>  [1] \"2000-01-05\" \"2000-01-12\" \"2000-01-19\" \"2000-01-26\" \"2000-02-02\" #>  [6] \"2000-02-09\" \"2000-02-16\" \"2000-02-23\" \"2000-03-01\" \"2000-03-08\" #> [11] \"2000-03-15\" \"2000-03-22\" \"2000-03-29\" \"2000-03-31\" \"2000-04-05\"  wday(last_friday_or_wednesdays[1:15], label = TRUE) #>  [1] Wed Wed Wed Wed Wed Wed Wed Wed Wed Wed Wed Wed Wed Fri Wed #> Levels: Sun < Mon < Tue < Wed < Thu < Fri < Sat"},{"path":"/dev/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Davis Vaughan. Author, maintainer. Posit Software, PBC. Copyright holder, funder.","code":""},{"path":"/dev/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Vaughan D (2025). almanac: Tools Working Recurrence Rules. R package version 1.0.0.9000, https://github.com/DavisVaughan/almanac.","code":"@Manual{,   title = {almanac: Tools for Working with Recurrence Rules},   author = {Davis Vaughan},   year = {2025},   note = {R package version 1.0.0.9000},   url = {https://github.com/DavisVaughan/almanac}, }"},{"path":"/dev/index.html","id":"almanac","dir":"","previous_headings":"","what":"Tools for Working with Recurrence Rules","title":"Tools for Working with Recurrence Rules","text":"almanac provides tools working recurrence rules, fundamental building blocks used identify calendar “events”, weekends holidays. Additionally, provides full suite tools working holidays calendars. includes number built holidays, hol_christmas(), can also add custom holidays rholiday(). set holidays specific business, can aggregate calendar rcalendar(), specialized tooling like cal_events() generate holiday dates particular year.","code":"library(almanac)"},{"path":"/dev/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Tools for Working with Recurrence Rules","text":"Install released version almanac CRAN : Install development version GitHub :","code":"install.packages(\"almanac\") # install.packages(\"pak\") pak::pak(\"DavisVaughan/almanac\")"},{"path":"/dev/index.html","id":"recurrence-rules","dir":"","previous_headings":"","what":"Recurrence rules","title":"Tools for Working with Recurrence Rules","text":"Constructing recurrence rules looks like : underlying recurrence rule Thanksgiving holiday represented hol_us_thanksgiving(). constructing recurrence rule, can used generate dates “event set”. example, can search Thanksgivings 2000-2006. Determine particular date part event set alma_in(). can also shift existing sequence dates, “stepping ” dates part event set. additional “stepper” object can create intuitive stepping. Combine %s+% perform step done alma_step(). Create stepper function stepper(), use supplying number days step.","code":"# Thanksgiving = \"The fourth Thursday in November\" on_thanksgiving <- yearly() %>%    recur_on_month_of_year(\"November\") %>%   recur_on_day_of_week(\"Thursday\", nth = 4)  on_thanksgiving #> <rrule> #> • frequency: yearly #> • range: [1900-01-01, 2100-01-01] #> • month of year: Nov #> • day of week: Thu[4] alma_events(on_thanksgiving, year = 2000:2006) #> [1] \"2000-11-23\" \"2001-11-22\" \"2002-11-28\" \"2003-11-27\" \"2004-11-25\" #> [6] \"2005-11-24\" \"2006-11-23\" # Is this a Thanksgiving? alma_in(c(\"2000-01-01\", \"2000-11-23\"), on_thanksgiving) #> [1] FALSE  TRUE wednesday_before_thanksgiving <- as.Date(\"2000-11-22\")  # Thanksgiving was on 2000-11-23. # This steps over Thanksgiving to 2000-11-24. # Then steps 1 more day to 2000-11-25. alma_step(wednesday_before_thanksgiving, n = 2, on_thanksgiving) #> [1] \"2000-11-25\" step_over_thanksgiving <- stepper(on_thanksgiving) wednesday_before_thanksgiving %s+% step_over_thanksgiving(2) #> [1] \"2000-11-25\""},{"path":"/dev/index.html","id":"holidays-and-calendars","dir":"","previous_headings":"","what":"Holidays and calendars","title":"Tools for Working with Recurrence Rules","text":"example just scratches surface almanac can . Practically speaking, ’ll probably multiple holidays ’d like combine one big calendar. almanac provides full API working holidays calendars. example creates calendar containing Christmas, Thanksgiving, New Year’s Day: can ask next upcoming holiday cal_next(): holidays belong particular year cal_events(): Note New Year’s Day occurred Saturday. business observes New Year’s Day nearest weekday, can adjust holiday respect observance rule adding calendar: can union calendar on_weekends rule get recurrence set represents days business closed. can create stepper can step forwards “business day.” example, Christmas Monday 2006. wanted step 1 business day forward Friday Christmas, ’d probably like step weekend Christmas Monday finally land Tuesday:","code":"cal <- rcalendar(   hol_christmas(),   hol_us_thanksgiving(),   hol_new_years_day() )  cal #> <rcalendar[3]> #> • Christmas #> • US Thanksgiving #> • New Year's Day x <- as.Date(c(\"2019-12-05\", \"2020-02-05\")) cal_next(x, cal) #>              name       date #> 1       Christmas 2019-12-25 #> 2 US Thanksgiving 2020-11-26 events <- cal_events(cal, year = 2028) events$weekday <- lubridate::wday(events$date, label = TRUE) events #>              name       date weekday #> 1  New Year's Day 2028-01-01     Sat #> 2 US Thanksgiving 2028-11-23     Thu #> 3       Christmas 2028-12-25     Mon on_weekends <- weekly() %>%   recur_on_weekends()  cal <- rcalendar(   hol_christmas(),   hol_us_thanksgiving(),   hol_observe(     hol_new_years_day(),      adjust_on = on_weekends,      adjustment = adj_nearest   ) )  # Now it returns the previous Friday for the observed New Year's date. # Note that this fell in 2027, but was included in the 2028 set of dates # since most people would consider that part of the 2028 holiday calendar. events <- cal_events(cal, year = 2028) events$weekday <- lubridate::wday(events$date, label = TRUE) events #>              name       date weekday #> 1  New Year's Day 2027-12-31     Fri #> 2 US Thanksgiving 2028-11-23     Thu #> 3       Christmas 2028-12-25     Mon business_day <- stepper(runion(cal, on_weekends)) # Christmas was on a Monday in 2006. # This is the Friday before Christmas friday <- as.Date(\"2006-12-22\")  # Step forward 1 business day, going over the weekend and Christmas friday %s+% business_day(1) #> [1] \"2006-12-26\""},{"path":"/dev/index.html","id":"learning-more","dir":"","previous_headings":"","what":"Learning more","title":"Tools for Working with Recurrence Rules","text":"View vignettes website learn use almanac. vignette(\"almanac\") vignette(\"holidays-calendars\") vignette(\"adjust--shift\") vignette(\"quarterly\") vignette(\"icalendar\")","code":""},{"path":"/dev/index.html","id":"acknowledgements","dir":"","previous_headings":"","what":"Acknowledgements","title":"Tools for Working with Recurrence Rules","text":"almanac developed composite ideas multiple different libraries. First , directly embeds amazing JavaScript library rrule core event set calculations. , uses equally awesome R package, V8, Jeroen Ooms. date shifting / adjusting functions modeled similar functions QuantLib. fast binary search based implementations alma_next() alma_step() inspired Pandas implementation Numpy’s busday_offset(). author gs, James Laird-Smith, great collaborator bounced ideas . gs attempts solve similar problem, slightly different implementation.","code":""},{"path":"/dev/reference/adjustments.html","id":null,"dir":"Reference","previous_headings":"","what":"Date adjustments — adjustments","title":"Date adjustments — adjustments","text":"family adj_*() functions encode business logic common date adjustments. x falls event date, adjusted according function's adjustment rule. Otherwise left untouched. adj_following() Choose first non-event date x. adj_preceding() Choose first non-event date x. adj_modified_following() Choose first non-event date x, unless falls different month, case first non-event date x chosen instead. adj_modified_preceding() Choose first non-event date x, unless falls different month, case first non-event date x chosen instead. adj_nearest() Choose nearest non-event date x. closest preceding following non-event dates equally far away, following non-event date chosen. adj_none() Performs adjustment returns x unchanged.","code":""},{"path":"/dev/reference/adjustments.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Date adjustments — adjustments","text":"","code":"adj_following(x, rschedule)  adj_preceding(x, rschedule)  adj_modified_following(x, rschedule)  adj_modified_preceding(x, rschedule)  adj_nearest(x, rschedule)  adj_none(x, rschedule)"},{"path":"/dev/reference/adjustments.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Date adjustments — adjustments","text":"x [Date] vector dates. rschedule [rschedule] rschedule, rrule, runion, rintersect, rsetdiff.","code":""},{"path":"/dev/reference/adjustments.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Date adjustments — adjustments","text":"adjusted vector Dates.","code":""},{"path":"/dev/reference/adjustments.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Date adjustments — adjustments","text":"","code":"# A Saturday x <- as.Date(\"1970-01-03\")  on_weekends <- weekly() %>% recur_on_weekends()  # Adjust forward to Monday adj_following(x, on_weekends) #> [1] \"1970-01-05\"  # Adjust backwards to Friday adj_preceding(x, on_weekends) #> [1] \"1970-01-02\"  # Adjust to nearest non-event date adj_nearest(x, on_weekends) #> [1] \"1970-01-02\" adj_nearest(x + 1, on_weekends) #> [1] \"1970-01-05\"  # Sundays, one of which is at the end of the month sundays <- as.Date(c(\"2020-05-24\", \"2020-05-31\"))  # Adjust forward, unless that takes us into a new month, in which case we # adjust backwards. adj_modified_following(sundays, on_weekends) #> [1] \"2020-05-25\" \"2020-05-29\"  # Saturdays, one of which is at the beginning of the month saturdays <- as.Date(c(\"2020-08-01\", \"2020-08-08\"))  # Adjust backwards, unless that takes us into a new month, in which # case we adjust forwards adj_modified_preceding(saturdays, on_weekends) #> [1] \"2020-08-03\" \"2020-08-07\""},{"path":"/dev/reference/alma_events.html","id":null,"dir":"Reference","previous_headings":"","what":"Get all events — alma_events","title":"Get all events — alma_events","text":"alma_events() retrieves events rschedule's event set.","code":""},{"path":"/dev/reference/alma_events.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get all events — alma_events","text":"","code":"alma_events(rschedule, ..., year = NULL)"},{"path":"/dev/reference/alma_events.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get all events — alma_events","text":"rschedule [rschedule] rschedule, rrule, runion, rintersect, rsetdiff. ... dots future extensions must empty. year [NULL / integer] optional integer vector years limit returned events .","code":""},{"path":"/dev/reference/alma_events.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get all events — alma_events","text":"Date vector events.","code":""},{"path":"/dev/reference/alma_events.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get all events — alma_events","text":"","code":"rrule <- daily(since = \"1970-01-01\", until = \"1970-01-05\")  alma_events(rrule) #> [1] \"1970-01-01\" \"1970-01-02\" \"1970-01-03\" \"1970-01-04\" \"1970-01-05\"  on_christmas <- yearly() %>%   recur_on_month_of_year(\"Dec\") %>%   recur_on_day_of_month(25)  alma_events(on_christmas, year = c(2020, 2022)) #> [1] \"2020-12-25\" \"2022-12-25\""},{"path":"/dev/reference/alma_in.html","id":null,"dir":"Reference","previous_headings":"","what":"Check if dates are in an event set — alma_in","title":"Check if dates are in an event set — alma_in","text":"alma_in() checks x event set dates defined rschedule.","code":""},{"path":"/dev/reference/alma_in.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check if dates are in an event set — alma_in","text":"","code":"alma_in(x, rschedule)"},{"path":"/dev/reference/alma_in.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Check if dates are in an event set — alma_in","text":"x [Date] vector dates. rschedule [rschedule] rschedule, rrule, runion, rintersect, rsetdiff.","code":""},{"path":"/dev/reference/alma_in.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Check if dates are in an event set — alma_in","text":"logical vector size x.","code":""},{"path":"/dev/reference/alma_in.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Check if dates are in an event set — alma_in","text":"","code":"rrule <- weekly() %>%   recur_on_day_of_week(\"Thursday\")  # A Thursday and Friday x <- as.Date(\"1970-01-01\") + 0:1  alma_in(x, rrule) #> [1]  TRUE FALSE  # Every month, on the 2nd day of the month rrule2 <- monthly() %>%   recur_on_day_of_month(2)  # Make a larger set of multiple rules rb <- runion(rrule, rrule2)  alma_in(x, rb) #> [1] TRUE TRUE"},{"path":"/dev/reference/alma_next.html","id":null,"dir":"Reference","previous_headings":"","what":"Generate the next or previous event — alma_next","title":"Generate the next or previous event — alma_next","text":"alma_next() generates next event x. alma_previous() generates previous event x.","code":""},{"path":"/dev/reference/alma_next.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generate the next or previous event — alma_next","text":"","code":"alma_next(x, rschedule, inclusive = FALSE)  alma_previous(x, rschedule, inclusive = FALSE)"},{"path":"/dev/reference/alma_next.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generate the next or previous event — alma_next","text":"x [Date] vector dates. rschedule [rschedule] rschedule, rrule, runion, rintersect, rsetdiff. inclusive [logical(1)] x event, considered next previous event?","code":""},{"path":"/dev/reference/alma_next.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Generate the next or previous event — alma_next","text":"Date vector size x.","code":""},{"path":"/dev/reference/alma_next.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Generate the next or previous event — alma_next","text":"","code":"on_12th <- monthly() %>% recur_on_day_of_month(12) on_monday <- weekly() %>% recur_on_day_of_week(\"Monday\")  # On the 12th of the month, or on Mondays rb <- runion(on_12th, on_monday)  alma_next(c(\"2019-01-01\", \"2019-01-11\"), rb) #> [1] \"2019-01-07\" \"2019-01-12\" alma_previous(c(\"2019-01-01\", \"2019-01-11\"), rb) #> [1] \"2018-12-31\" \"2019-01-07\""},{"path":"/dev/reference/alma_search.html","id":null,"dir":"Reference","previous_headings":"","what":"Search for events — alma_search","title":"Search for events — alma_search","text":"alma_search() retrieves events .","code":""},{"path":"/dev/reference/alma_search.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Search for events — alma_search","text":"","code":"alma_search(from, to, rschedule, inclusive = TRUE)"},{"path":"/dev/reference/alma_search.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Search for events — alma_search","text":", [Date(1)] Dates defining range look events. rschedule [rschedule] rschedule, rrule, runion, rintersect, rsetdiff. inclusive [logical(1)] events, included?","code":""},{"path":"/dev/reference/alma_search.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Search for events — alma_search","text":"Date vector events .","code":""},{"path":"/dev/reference/alma_search.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Search for events — alma_search","text":"","code":"on_12th <- monthly() %>% recur_on_day_of_month(12) on_monday <- weekly() %>% recur_on_day_of_week(\"Monday\")  # On the 12th of the month, or on Mondays rb <- runion(on_12th, on_monday)  alma_search(\"2019-01-01\", \"2019-01-31\", rb) #> [1] \"2019-01-07\" \"2019-01-12\" \"2019-01-14\" \"2019-01-21\" \"2019-01-28\""},{"path":"/dev/reference/alma_seq.html","id":null,"dir":"Reference","previous_headings":"","what":"Generate date sequences — alma_seq","title":"Generate date sequences — alma_seq","text":"alma_seq() generates sequence dates , skipping events defined rschedule.","code":""},{"path":"/dev/reference/alma_seq.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generate date sequences — alma_seq","text":"","code":"alma_seq(from, to, rschedule, inclusive = TRUE)"},{"path":"/dev/reference/alma_seq.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generate date sequences — alma_seq","text":", [Date(1)] Dates defining range look events. rschedule [rschedule] rschedule, rrule, runion, rintersect, rsetdiff. inclusive [logical(1)] events rschedule, removed sequence?","code":""},{"path":"/dev/reference/alma_seq.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Generate date sequences — alma_seq","text":"vector dates range [, ], events rschedule removed.","code":""},{"path":"/dev/reference/alma_seq.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Generate date sequences — alma_seq","text":"","code":"on_weekends <- weekly() %>% recur_on_weekends()  # Generate a sequence of all non-weekend dates in Jan-2000 alma_seq(\"2000-01-01\", \"2000-01-31\", on_weekends) #>  [1] \"2000-01-03\" \"2000-01-04\" \"2000-01-05\" \"2000-01-06\" \"2000-01-07\" #>  [6] \"2000-01-10\" \"2000-01-11\" \"2000-01-12\" \"2000-01-13\" \"2000-01-14\" #> [11] \"2000-01-17\" \"2000-01-18\" \"2000-01-19\" \"2000-01-20\" \"2000-01-21\" #> [16] \"2000-01-24\" \"2000-01-25\" \"2000-01-26\" \"2000-01-27\" \"2000-01-28\" #> [21] \"2000-01-31\""},{"path":"/dev/reference/alma_step.html","id":null,"dir":"Reference","previous_headings":"","what":"Step relative to an rschedule — alma_step","title":"Step relative to an rschedule — alma_step","text":"alma_step() useful shifting dates \"n business days\". alma_step() steps sequence dates 1 day time, n days. step, adjustment applied shift next non-event date. n positive, adj_following() called. n negative, adj_preceding() called. n zero, arbitrarily decided call adj_following() roll next available non-event date.","code":""},{"path":"/dev/reference/alma_step.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Step relative to an rschedule — alma_step","text":"","code":"alma_step(x, n, rschedule)"},{"path":"/dev/reference/alma_step.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Step relative to an rschedule — alma_step","text":"x [Date] vector dates. n [integer] number days step. Can negative step backwards. rschedule [rschedule] rschedule, rrule, runion, rintersect, rsetdiff.","code":""},{"path":"/dev/reference/alma_step.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Step relative to an rschedule — alma_step","text":"Date vector size x shifted n steps.","code":""},{"path":"/dev/reference/alma_step.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Step relative to an rschedule — alma_step","text":"Imagine Friday want shift forward 2 days using rrule marks weekends events. alma_step() works like : Step forward 1 day Saturday. Apply adjustment adj_following(), rolls forward Monday. Step forward 1 day Tuesday. Apply adjustment adj_following(), adjustment required. lends naturally business logic. Two business days Friday Tuesday.","code":""},{"path":"/dev/reference/alma_step.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Step relative to an rschedule — alma_step","text":"","code":"# Make a rrule for weekends on_weekends <- weekly() %>%   recur_on_weekends()  # \"Step forward by 2 business days\" # 2019-09-13 is a Friday. # Here we: # - Step 1 day to Saturday # - Adjust to Monday # - Step 1 day to Tuesday alma_step(\"2019-09-13\", 2, on_weekends) #> [1] \"2019-09-17\"  # If Monday, 2019-09-16, was a recurring holiday, we could create # a custom runion and step over that too. on_09_16 <- yearly() %>%   recur_on_month_of_year(9) %>%   recur_on_day_of_month(16)  rb <- runion(on_09_16, on_weekends)  alma_step(\"2019-09-13\", 2, rb) #> [1] \"2019-09-18\""},{"path":"/dev/reference/almanac-defaults.html","id":null,"dir":"Reference","previous_headings":"","what":"Default values in almanac — almanac-defaults","title":"Default values in almanac — almanac-defaults","text":"almanac_since() represents default since date used almanac. defaults 1900-01-01, Monday. almanac_until() represents default date used almanac. defaults 2100-01-01, Friday. choice since somewhat arbitrary, generate useful event set range rschedules. need adjust defaults, supply since arguments directly rrule generators, like yearly() weekly(). since default particularly important weekly recurrence rules, since date represents anchor point begin counting . See recur_on_day_of_week() examples adjust .","code":""},{"path":"/dev/reference/almanac-defaults.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Default values in almanac — almanac-defaults","text":"","code":"almanac_since()  almanac_until()"},{"path":"/dev/reference/almanac-defaults.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Default values in almanac — almanac-defaults","text":"","code":"almanac_since() #> [1] \"1900-01-01\" almanac_until() #> [1] \"2100-01-01\""},{"path":"/dev/reference/almanac-package.html","id":null,"dir":"Reference","previous_headings":"","what":"almanac: Tools for Working with Recurrence Rules — almanac-package","title":"almanac: Tools for Working with Recurrence Rules — almanac-package","text":"Provides tools defining recurrence rules recurrence sets. Recurrence rules programmatic way define recurring event, like first Monday December. Multiple recurrence rules can combined larger recurrence sets. full holiday calendar interface also provided can generate holidays within particular year, can detect date holiday, can respect holiday observance rules, allows custom holidays.","code":""},{"path":[]},{"path":"/dev/reference/almanac-package.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"almanac: Tools for Working with Recurrence Rules — almanac-package","text":"Maintainer: Davis Vaughan davis@posit.co contributors: Posit Software, PBC [copyright holder, funder]","code":""},{"path":"/dev/reference/almanac-vctrs-compat.html","id":null,"dir":"Reference","previous_headings":"","what":"vctrs compatibility functions — almanac-vctrs-compat","title":"vctrs compatibility functions — almanac-vctrs-compat","text":"functions extensions allow stepper objects work vctrs.","code":""},{"path":"/dev/reference/almanac-vctrs-compat.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"vctrs compatibility functions — almanac-vctrs-compat","text":"","code":"# S3 method for class 'almanac_stepper' vec_arith(op, x, y, ...)  # S3 method for class 'almanac_stepper.almanac_stepper' vec_ptype2(x, y, ..., x_arg = \"\", y_arg = \"\")  # S3 method for class 'almanac_stepper.almanac_stepper' vec_cast(x, to, ..., x_arg = \"\", to_arg = \"\")"},{"path":"/dev/reference/almanac-vctrs-compat.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"vctrs compatibility functions — almanac-vctrs-compat","text":"op arithmetic operator string. x, y, Objects. ... Used pass along error message information. x_arg, y_arg, to_arg Used pass along error message information.","code":""},{"path":"/dev/reference/almanac-vctrs-compat.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"vctrs compatibility functions — almanac-vctrs-compat","text":"See corresponding vctrs function exact return value.","code":""},{"path":"/dev/reference/almanac-vctrs-compat.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"vctrs compatibility functions — almanac-vctrs-compat","text":"","code":"library(vctrs) vec_arith(\"+\", as.Date(\"2019-01-04\"), workdays(1)) #> [1] \"2019-01-07\""},{"path":"/dev/reference/cal_events.html","id":null,"dir":"Reference","previous_headings":"","what":"Calendar events — cal_events","title":"Calendar events — cal_events","text":"cal_events() returns data frame holiday name / event date pairs calendar. similar alma_events(), returns information name holiday specialized behavior related observed dates filtering year.","code":""},{"path":"/dev/reference/cal_events.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calendar events — cal_events","text":"","code":"cal_events(x, ..., year = NULL, observed = FALSE)"},{"path":"/dev/reference/cal_events.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calendar events — cal_events","text":"x [rcalendar] rcalendar. ... dots future extensions must empty. year [integer] integer vector years filter . observed [FALSE / TRUE] filtering specific years, observed date holiday used filtering purposes? FALSE, actual date holiday used, .e. date observance adjustments created hol_observe() applied, typically desired filtering year's worth holidays. See examples.","code":""},{"path":"/dev/reference/cal_events.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calendar events — cal_events","text":"two column data frame: name character vector holiday names. date Date vector holiday event dates.","code":""},{"path":"/dev/reference/cal_events.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Calendar events — cal_events","text":"","code":"on_weekends <- weekly() %>%   recur_on_weekends()  # New Year's Day, observed on the nearest weekday if it falls on a weekend on_new_years <- hol_new_years_day() %>%   hol_observe(on_weekends, adj_nearest)  # Christmas, observed on the nearest weekday if it falls on a weekend on_christmas <- hol_christmas() %>%   hol_observe(on_weekends, adj_nearest)  cal <- rcalendar(on_new_years, on_christmas) cal #> <rcalendar[2]> #> • New Year's Day #> • Christmas  # In 2010, Christmas fell on a Saturday and was adjusted backwards cal_events(cal, year = 2010) #>             name       date #> 1 New Year's Day 2010-01-01 #> 2      Christmas 2010-12-24  # In 2011, New Year's fell on a Saturday and was adjusted backwards. # Note that the returned date is in 2010, even though we requested holidays # for 2011, because most people would consider the actual New Year's date of # 2011-01-01 part of the 2011 set of holidays, even though it was observed in # 2010. cal_events(cal, year = 2011) #>             name       date #> 1 New Year's Day 2010-12-31 #> 2      Christmas 2011-12-26  # If you want to filter by the observed date, set `observed = TRUE`, which # will move the New Year's Day that was observed in 2010 to the 2010 result cal_events(cal, year = 2010, observed = TRUE) #>             name       date #> 1 New Year's Day 2010-01-01 #> 2      Christmas 2010-12-24 #> 3 New Year's Day 2010-12-31 cal_events(cal, year = 2011, observed = TRUE) #>        name       date #> 1 Christmas 2011-12-26"},{"path":"/dev/reference/cal_match.html","id":null,"dir":"Reference","previous_headings":"","what":"Calendar matching — cal_match","title":"Calendar matching — cal_match","text":"cal_match() matches date x holiday rcalendar returns corresponding holiday name, NA exist calendar. date corresponds multiple holidays, holiday added calendar first returned. function intended similar base::match().","code":""},{"path":"/dev/reference/cal_match.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calendar matching — cal_match","text":"","code":"cal_match(x, rcalendar)"},{"path":"/dev/reference/cal_match.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calendar matching — cal_match","text":"x [Date] date vector match. rcalendar [rcalendar] calendar look holiday matches .","code":""},{"path":"/dev/reference/cal_match.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calendar matching — cal_match","text":"character vector size x.","code":""},{"path":"/dev/reference/cal_match.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Calendar matching — cal_match","text":"","code":"cal <- rcalendar(   hol_christmas(),   hol_halloween(),   hol_new_years_day(),   hol_us_presidents_day() )  x <- as.Date(c(   \"2019-01-02\",   \"2019-12-25\",   \"2018-02-19\",   \"2018-02-20\",   \"2020-10-31\" ))  cal_match(x, cal) #> [1] NA                   \"Christmas\"          \"US Presidents' Day\" #> [4] NA                   \"Halloween\""},{"path":"/dev/reference/cal_names.html","id":null,"dir":"Reference","previous_headings":"","what":"Calendar names — cal_names","title":"Calendar names — cal_names","text":"cal_names() returns names holidays calendar.","code":""},{"path":"/dev/reference/cal_names.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calendar names — cal_names","text":"","code":"cal_names(x)"},{"path":"/dev/reference/cal_names.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calendar names — cal_names","text":"x [rcalendar] rcalendar.","code":""},{"path":"/dev/reference/cal_names.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calendar names — cal_names","text":"character vector holiday names.","code":""},{"path":"/dev/reference/cal_names.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Calendar names — cal_names","text":"","code":"x <- rcalendar(hol_christmas(), hol_new_years_day()) cal_names(x) #> [1] \"Christmas\"      \"New Year's Day\""},{"path":"/dev/reference/cal_us_federal.html","id":null,"dir":"Reference","previous_headings":"","what":"US federal calendar — cal_us_federal","title":"US federal calendar — cal_us_federal","text":"cal_us_federal() example calendar represents federal holidays United States. makes attempt historically accurate, instead represents currently recognized federal holidays. calendar represents observed dates holiday, rather actual dates holiday (.e. holiday falls Saturday, federally observed preceding Friday). Refer source code cal_us_federal() get feel build personal calendar.","code":""},{"path":"/dev/reference/cal_us_federal.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"US federal calendar — cal_us_federal","text":"","code":"cal_us_federal(since = NULL, until = NULL)"},{"path":"/dev/reference/cal_us_federal.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"US federal calendar — cal_us_federal","text":"since [Date(1)] lower bound event set generate. Defaults almanac_since() set. [Date(1)] upper bound event set generate. Defaults almanac_until() set.","code":""},{"path":"/dev/reference/cal_us_federal.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"US federal calendar — cal_us_federal","text":"rcalendar.","code":""},{"path":"/dev/reference/cal_us_federal.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"US federal calendar — cal_us_federal","text":"","code":"cal <- cal_us_federal()  # All 2023 holidays cal_events(cal, year = 2023) #>                             name       date #> 1                 New Year's Day 2023-01-02 #> 2  US Martin Luther King Jr. Day 2023-01-16 #> 3             US Presidents' Day 2023-02-20 #> 4                US Memorial Day 2023-05-29 #> 5                  US Juneteenth 2023-06-19 #> 6            US Independence Day 2023-07-04 #> 7                   US Labor Day 2023-09-04 #> 8     US Indigenous Peoples' Day 2023-10-09 #> 9                US Veterans Day 2023-11-10 #> 10               US Thanksgiving 2023-11-23 #> 11                     Christmas 2023-12-25  # Notice that for 2028, `cal_events()` knows that you probably want to # treat New Year's Day as a 2028 holiday even though it will observed in # 2027 (because it will be a Saturday and will be rolled back to being # observed on Friday) cal_events(cal, year = 2028) #>                             name       date #> 1                 New Year's Day 2027-12-31 #> 2  US Martin Luther King Jr. Day 2028-01-17 #> 3             US Presidents' Day 2028-02-21 #> 4                US Memorial Day 2028-05-29 #> 5                  US Juneteenth 2028-06-19 #> 6            US Independence Day 2028-07-04 #> 7                   US Labor Day 2028-09-04 #> 8     US Indigenous Peoples' Day 2028-10-09 #> 9                US Veterans Day 2028-11-10 #> 10               US Thanksgiving 2028-11-23 #> 11                     Christmas 2028-12-25  # Were any of these dates on a holiday? x <- as.Date(c(   \"2023-11-10\",   \"2023-10-05\",   \"2023-06-19\",   \"2023-05-29\",   \"2023-05-28\" ))  alma_in(x, cal) #> [1]  TRUE FALSE  TRUE  TRUE FALSE  # Which one? cal_match(x, cal) #> [1] \"US Veterans Day\" NA                \"US Juneteenth\"   \"US Memorial Day\" #> [5] NA"},{"path":"/dev/reference/calendar-add-remove.html","id":null,"dir":"Reference","previous_headings":"","what":"Calendar additions and removals — calendar-add-remove","title":"Calendar additions and removals — calendar-add-remove","text":"cal_add() adds rholiday rcalendar. cal_remove() removes rholiday rcalendar name, either specifying character name rholiday object name.","code":""},{"path":"/dev/reference/calendar-add-remove.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calendar additions and removals — calendar-add-remove","text":"","code":"cal_add(x, rholiday)  cal_remove(x, what)"},{"path":"/dev/reference/calendar-add-remove.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calendar additions and removals — calendar-add-remove","text":"x [rcalendar] rcalendar. rholiday [rholiday] rholiday add rcalendar. [character(1) / rholiday] name holiday remove rcalendar, rholiday object corresponding name like remove.","code":""},{"path":"/dev/reference/calendar-add-remove.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calendar additions and removals — calendar-add-remove","text":"new rcalendar holiday added removed.","code":""},{"path":"/dev/reference/calendar-add-remove.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Calendar additions and removals — calendar-add-remove","text":"","code":"cal <- rcalendar(   hol_christmas(),   hol_halloween(),   hol_new_years_day(),   hol_us_presidents_day() )  # Can't forget Easter! cal %>%   cal_add(hol_easter()) #> <rcalendar[5]> #> • Christmas #> • Halloween #> • New Year's Day #> • US Presidents' Day #> • Easter  # Didn't actually need Halloween cal %>%   cal_remove(hol_halloween()) #> <rcalendar[3]> #> • Christmas #> • New Year's Day #> • US Presidents' Day  # Can remove by name or by object cal %>%   cal_remove(\"Halloween\") #> <rcalendar[3]> #> • Christmas #> • New Year's Day #> • US Presidents' Day"},{"path":"/dev/reference/calendar-locations.html","id":null,"dir":"Reference","previous_headings":"","what":"Calendar locations — calendar-locations","title":"Calendar locations — calendar-locations","text":"cal_next() generates next holiday x. cal_previous() generates previous holiday x. holiday exists /x, missing row generated.","code":""},{"path":"/dev/reference/calendar-locations.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calendar locations — calendar-locations","text":"","code":"cal_next(x, rcalendar, ..., inclusive = FALSE)  cal_previous(x, rcalendar, ..., inclusive = FALSE)"},{"path":"/dev/reference/calendar-locations.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calendar locations — calendar-locations","text":"x [Date] vector dates. rcalendar [rcalendar] rcalendar. ... dots future extensions must empty. inclusive [logical(1)] x event, considered next previous event?","code":""},{"path":"/dev/reference/calendar-locations.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calendar locations — calendar-locations","text":"two column data frame, like cal_events(), size x contains either next previous holiday relative x.","code":""},{"path":"/dev/reference/calendar-locations.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Calendar locations — calendar-locations","text":"","code":"x <- as.Date(c(\"2023-04-11\", \"2023-08-10\", \"2021-05-06\")) cal <- cal_us_federal()  cal_next(x, cal) #>              name       date #> 1 US Memorial Day 2023-05-29 #> 2    US Labor Day 2023-09-04 #> 3 US Memorial Day 2021-05-31 cal_previous(x, cal) #>                  name       date #> 1  US Presidents' Day 2023-02-20 #> 2 US Independence Day 2023-07-04 #> 3  US Presidents' Day 2021-02-15"},{"path":"/dev/reference/deprecated-recur.html","id":null,"dir":"Reference","previous_headings":"","what":"Deprecated recurrence helpers — deprecated-recur","title":"Deprecated recurrence helpers — deprecated-recur","text":"recur_on_mday() deprecated almanac 1.0.0 favor recur_on_day_of_month(). recur_on_wday() deprecated almanac 1.0.0 favor recur_on_day_of_week(). recur_on_yday() deprecated almanac 1.0.0 favor recur_on_day_of_year(). recur_on_yweek() deprecated almanac 1.0.0 favor recur_on_week_of_year(). recur_on_ymonth() deprecated almanac 1.0.0 favor recur_on_month_of_year().","code":""},{"path":"/dev/reference/deprecated-recur.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Deprecated recurrence helpers — deprecated-recur","text":"","code":"recur_on_mday(x, mday)  recur_on_wday(x, wday, nth = NULL)  recur_on_yday(x, yday)  recur_on_yweek(x, yweek)  recur_on_ymonth(x, ymonth)"},{"path":"/dev/reference/deprecated-recur.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Deprecated recurrence helpers — deprecated-recur","text":"x [rrule] recurrence rule. mday [integer] days month recur. Negative values allowed, specify n days end month. wday [integer / character] Days week recur . Integer values must 1 7, 1 = Monday 7 = Sunday. also allowed full weekday string like \"Tuesday\", abbreviation like \"Tues\". nth [integer / NULL] Limit n-th occurrence day base frequency. example, monthly frequency, using nth = -1 limit last day month. default NULL chooses occurrences. yweek [integer] Weeks year recur . Integer values must [1, 53] [-53, -1].","code":""},{"path":"/dev/reference/holiday-utilities.html","id":null,"dir":"Reference","previous_headings":"","what":"Holiday utility functions — holiday-utilities","title":"Holiday utility functions — holiday-utilities","text":"three functions allow tweak existing holidays created rholiday() properly align business calendars. resulting holidays can added rcalendar(). hol_observe() adjusts holiday based actually observed. example, many holidays occur Saturday actually observed preceding Friday following Monday. hol_offset() creates new holiday offsetting existing one. example, Boxing Day day Christmas, observance Boxing Day may dependent observance Christmas (.e. Christmas Sunday, may observed Monday, Boxing Day observed Tuesday). hol_rename() renames existing holiday. typically useful call hol_offset(), since rename holiday may want give different name.","code":""},{"path":"/dev/reference/holiday-utilities.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Holiday utility functions — holiday-utilities","text":"","code":"hol_observe(x, adjust_on, adjustment)  hol_offset(x, by)  hol_rename(x, name)"},{"path":"/dev/reference/holiday-utilities.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Holiday utility functions — holiday-utilities","text":"x [rholiday] rholiday. adjust_on [rschedule] rschedule determines adjustment applied. adjustment [function] adjustment function apply problematic dates. Typically one pre-existing adjustment functions, like adj_nearest(). custom adjustment function must two arguments x rschedule. x complete vector dates possibly need adjustment. rschedule rschedule event set determines adjustment needs applied. function adjust x required return adjusted Date vector. [integer(1)] single integer offset . name [character(1)] new name holiday.","code":""},{"path":"/dev/reference/holiday-utilities.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Holiday utility functions — holiday-utilities","text":"","code":"on_weekends <- weekly() %>%   recur_on_weekends()  # Christmas, adjusted to nearest Friday or Monday if it falls on a weekend on_christmas <- hol_christmas() %>%   hol_observe(on_weekends, adj_nearest)  # Boxing Day is the day after Christmas. # If observed Christmas is a Friday, then observed Boxing Day should be Monday. # If observed Christmas is a Monday, then observed Boxing Day should be Tuesday. on_boxing_day <- on_christmas %>%   hol_offset(1) %>%   hol_observe(on_weekends, adj_following) %>%   hol_rename(\"Boxing Day\")  christmas_dates <- alma_events(on_christmas, year = 2010:2015) boxing_day_dates <- alma_events(on_boxing_day, year = 2010:2015)  data.frame(   christmas = christmas_dates,   boxing_day = boxing_day_dates,   christmas_weekday = lubridate::wday(christmas_dates, label = TRUE),   boxing_day_weekday = lubridate::wday(boxing_day_dates, label = TRUE) ) #>    christmas boxing_day christmas_weekday boxing_day_weekday #> 1 2010-12-24 2010-12-27               Fri                Mon #> 2 2011-12-26 2011-12-27               Mon                Tue #> 3 2012-12-25 2012-12-26               Tue                Wed #> 4 2013-12-25 2013-12-26               Wed                Thu #> 5 2014-12-25 2014-12-26               Thu                Fri #> 6 2015-12-25 2015-12-28               Fri                Mon"},{"path":"/dev/reference/holidays.html","id":null,"dir":"Reference","previous_headings":"","what":"Holidays — holidays","title":"Holidays — holidays","text":"page lists number pre-created holidays can added calendar created rcalendar(). list makes attempt comprehensive. need create holiday, can rholiday(). also makes attempt historically accurate, .e. Juneteenth created 2021, hol_us_juneteenth() generate event dates . rholiday() takes arbitrary rschedule object, can always create rschedule historically accurate use instead.","code":""},{"path":"/dev/reference/holidays.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Holidays — holidays","text":"","code":"hol_christmas(since = NULL, until = NULL)  hol_christmas_eve(since = NULL, until = NULL)  hol_easter(since = NULL, until = NULL)  hol_good_friday(since = NULL, until = NULL)  hol_halloween(since = NULL, until = NULL)  hol_new_years_day(since = NULL, until = NULL)  hol_new_years_eve(since = NULL, until = NULL)  hol_st_patricks_day(since = NULL, until = NULL)  hol_valentines_day(since = NULL, until = NULL)  hol_us_election_day(since = NULL, until = NULL)  hol_us_fathers_day(since = NULL, until = NULL)  hol_us_independence_day(since = NULL, until = NULL)  hol_us_indigenous_peoples_day(since = NULL, until = NULL)  hol_us_juneteenth(since = NULL, until = NULL)  hol_us_labor_day(since = NULL, until = NULL)  hol_us_martin_luther_king_junior_day(since = NULL, until = NULL)  hol_us_memorial_day(since = NULL, until = NULL)  hol_us_mothers_day(since = NULL, until = NULL)  hol_us_presidents_day(since = NULL, until = NULL)  hol_us_thanksgiving(since = NULL, until = NULL)  hol_us_veterans_day(since = NULL, until = NULL)"},{"path":"/dev/reference/holidays.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Holidays — holidays","text":"since [Date(1)] lower bound event set generate. Defaults almanac_since() set. [Date(1)] upper bound event set generate. Defaults almanac_until() set.","code":""},{"path":"/dev/reference/holidays.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Holidays — holidays","text":"Note relative holidays, New Year's Eve, 1 day New Year's Day, pre-created way allows define observance rules depend observance rules holiday relative . need , start base holiday, hol_new_years_day(), use hol_observe() hol_offset() generate New Year's Eve holiday matches required observance rules. See examples hol_offset() information.","code":""},{"path":"/dev/reference/holidays.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Holidays — holidays","text":"","code":"on_christmas <- hol_christmas() on_christmas #> <Christmas> #>  <rrule> #>  • frequency: yearly #>  • range: [1900-01-01, 2100-01-01] #>  • month of year: Dec #>  • day of month: 25  # These are like any other rschedule object alma_events(on_christmas, year = 2020:2025) #> [1] \"2020-12-25\" \"2021-12-25\" \"2022-12-25\" \"2023-12-25\" \"2024-12-25\" #> [6] \"2025-12-25\"  # But they can also be added into an rcalendar cal <- rcalendar(   on_christmas,   hol_halloween(),   hol_new_years_day(),   hol_us_presidents_day() ) cal #> <rcalendar[4]> #> • Christmas #> • Halloween #> • New Year's Day #> • US Presidents' Day  # Which gives you access to a number of `cal_*()` functions cal_events(cal, year = 2020:2022) #>                  name       date #> 1      New Year's Day 2020-01-01 #> 2  US Presidents' Day 2020-02-17 #> 3           Halloween 2020-10-31 #> 4           Christmas 2020-12-25 #> 5      New Year's Day 2021-01-01 #> 6  US Presidents' Day 2021-02-15 #> 7           Halloween 2021-10-31 #> 8           Christmas 2021-12-25 #> 9      New Year's Day 2022-01-01 #> 10 US Presidents' Day 2022-02-21 #> 11          Halloween 2022-10-31 #> 12          Christmas 2022-12-25"},{"path":"/dev/reference/new_rschedule.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a new rschedule — new_rschedule","title":"Create a new rschedule — new_rschedule","text":"new_rschedule() developer focused tool required normal usage almanac. exported allow packages construct new rschedule objects work almanac functions prefixed alma_*(), like alma_in(). rschedule_events() generic function rschedule subclasses must provide method . rschedule_events() return Date vector containing complete ordered set events event set rschedule.","code":""},{"path":"/dev/reference/new_rschedule.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a new rschedule — new_rschedule","text":"","code":"new_rschedule(..., class)  rschedule_events(x)"},{"path":"/dev/reference/new_rschedule.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a new rschedule — new_rschedule","text":"... [named fields] Named data fields. class [character] required subclass. x [rschedule subclass] object subclasses rschedule.","code":""},{"path":"/dev/reference/new_rschedule.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create a new rschedule — new_rschedule","text":"new_rschedule(), new rschedule subclass. rschedule_events(), Date vector events.","code":""},{"path":"/dev/reference/new_rschedule.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Create a new rschedule — new_rschedule","text":"rschedule abstract class rrule rset inherit . sole functionality rschedule classes provide method rschedule_events().","code":""},{"path":"/dev/reference/new_rschedule.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create a new rschedule — new_rschedule","text":"","code":"events <- as.Date(\"1970-01-01\")  static <- new_rschedule(   events = events,   class = \"static_rschedule\" )  # You have to register an `rschedule_events()` method first! try(alma_events(static)) #> Error in rschedule_events(rschedule) :  #>   <almanac_rschedule> subclasses must provide their own #> `rschedule_events()` method."},{"path":"/dev/reference/pipe.html","id":null,"dir":"Reference","previous_headings":"","what":"Pipe operator — %>%","title":"Pipe operator — %>%","text":"See magrittr::%>% details.","code":""},{"path":"/dev/reference/pipe.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Pipe operator — %>%","text":"","code":"lhs %>% rhs"},{"path":"/dev/reference/radjusted.html","id":null,"dir":"Reference","previous_headings":"","what":"Create an adjusted rschedule — radjusted","title":"Create an adjusted rschedule — radjusted","text":"radjusted() creates new adjusted rschedule top existing one. new rschedule contains event dates existing rschedule, except intersect dates event set rschedule, adjust_on. cases, adjustment applied problematic dates shift valid event dates. useful creating corporate holiday rschedules. example, Christmas always falls December 25th, falls Saturday, company might observe Christmas previous Friday. falls Sunday, might observe following Monday. case, construct rschedule recurring event December 25th, second rschedule weekends. Christmas falls weekend, apply adjustment adj_nearest() get observance date.","code":""},{"path":"/dev/reference/radjusted.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create an adjusted rschedule — radjusted","text":"","code":"radjusted(rschedule, adjust_on, adjustment)"},{"path":"/dev/reference/radjusted.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create an adjusted rschedule — radjusted","text":"rschedule [rschedule] rschedule, rrule, runion, rintersect, rsetdiff. adjust_on [rschedule] rschedule determines adjustment applied. adjustment [function] adjustment function apply problematic dates. Typically one pre-existing adjustment functions, like adj_nearest(). custom adjustment function must two arguments x rschedule. x complete vector dates possibly need adjustment. rschedule rschedule event set determines adjustment needs applied. function adjust x required return adjusted Date vector.","code":""},{"path":"/dev/reference/radjusted.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create an adjusted rschedule — radjusted","text":"adjusted rschedule.","code":""},{"path":"/dev/reference/radjusted.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create an adjusted rschedule — radjusted","text":"","code":"since <- \"2000-01-01\" until <- \"2010-01-01\"  on_christmas <- yearly(since = since, until = until) %>%   recur_on_month_of_year(\"Dec\") %>%   recur_on_day_of_month(25)  # All Christmas dates, with no adjustments alma_events(on_christmas) #>  [1] \"2000-12-25\" \"2001-12-25\" \"2002-12-25\" \"2003-12-25\" \"2004-12-25\" #>  [6] \"2005-12-25\" \"2006-12-25\" \"2007-12-25\" \"2008-12-25\" \"2009-12-25\"  on_weekends <- weekly(since = since, until = until) %>%   recur_on_weekends()  # Now all Christmas dates that fell on a weekend are # adjusted either forwards or backwards, depending on which # non-event date was closer on_adj_christmas <- radjusted(on_christmas, on_weekends, adj_nearest)  alma_events(on_adj_christmas) #>  [1] \"2000-12-25\" \"2001-12-25\" \"2002-12-25\" \"2003-12-25\" \"2004-12-24\" #>  [6] \"2005-12-26\" \"2006-12-25\" \"2007-12-25\" \"2008-12-25\" \"2009-12-25\""},{"path":"/dev/reference/rcalendar.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a recurring calendar — rcalendar","title":"Create a recurring calendar — rcalendar","text":"rcalendar() creates calendar filled holidays created one existing hol_*() holidays (hol_christmas()) manually generated holiday created using rholiday(). calendar can used rschedule alma_*() function (like alma_in()), one specialized calendar functions, like cal_match() cal_events().","code":""},{"path":"/dev/reference/rcalendar.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a recurring calendar — rcalendar","text":"","code":"rcalendar(...)"},{"path":"/dev/reference/rcalendar.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a recurring calendar — rcalendar","text":"... [rholidays] One holidays created rholiday() hol_*().","code":""},{"path":"/dev/reference/rcalendar.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create a recurring calendar — rcalendar","text":"","code":"on_earth_day <- yearly() %>%   recur_on_month_of_year(\"April\") %>%   recur_on_day_of_month(22) %>%   rholiday(\"Earth Day\")  cal <- rcalendar(   hol_christmas(),   on_earth_day,   hol_us_independence_day() )  cal #> <rcalendar[3]> #> • Christmas #> • Earth Day #> • US Independence Day  cal_events(cal, year = 2020:2022) #>                  name       date #> 1           Earth Day 2020-04-22 #> 2 US Independence Day 2020-07-04 #> 3           Christmas 2020-12-25 #> 4           Earth Day 2021-04-22 #> 5 US Independence Day 2021-07-04 #> 6           Christmas 2021-12-25 #> 7           Earth Day 2022-04-22 #> 8 US Independence Day 2022-07-04 #> 9           Christmas 2022-12-25  # Lookup holiday name based on date, if it exists cal_match(c(\"2021-12-25\", \"2021-12-26\"), cal) #> [1] \"Christmas\" NA           # Find next holiday alma_next(\"2021-12-26\", cal) #> [1] \"2022-04-22\""},{"path":"/dev/reference/rcustom.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a custom rschedule — rcustom","title":"Create a custom rschedule — rcustom","text":"rcustom() creates rschedule manually defined event dates. can useful combined runion() rsetdiff() set fixed event dates forcibly include exclude rschedule.","code":""},{"path":"/dev/reference/rcustom.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a custom rschedule — rcustom","text":"","code":"rcustom(events)"},{"path":"/dev/reference/rcustom.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a custom rschedule — rcustom","text":"events [Date] vector event dates.","code":""},{"path":"/dev/reference/rcustom.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create a custom rschedule — rcustom","text":"custom rschedule.","code":""},{"path":"/dev/reference/rcustom.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create a custom rschedule — rcustom","text":"","code":"include <- rcustom(\"2019-07-05\") exclude <- rcustom(\"2019-07-04\")  independence_day <- yearly() %>%   recur_on_month_of_year(\"July\") %>%   recur_on_day_of_month(4)  # Remove forcibly excluded day independence_day <- rsetdiff(independence_day, exclude)  # Add forcibly included day independence_day <- runion(independence_day, include)  alma_search(\"2018-01-01\", \"2020-12-31\", independence_day) #> [1] \"2018-07-04\" \"2019-07-05\" \"2020-07-04\""},{"path":"/dev/reference/recur_for_count.html","id":null,"dir":"Reference","previous_headings":"","what":"Control the number of times to recur — recur_for_count","title":"Control the number of times to recur — recur_for_count","text":"recur_for_count() controls total number events recurrence set.","code":""},{"path":"/dev/reference/recur_for_count.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Control the number of times to recur — recur_for_count","text":"","code":"recur_for_count(x, n)"},{"path":"/dev/reference/recur_for_count.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Control the number of times to recur — recur_for_count","text":"x [rrule] recurrence rule. n [positive integer(1)] number times recur .","code":""},{"path":"/dev/reference/recur_for_count.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Control the number of times to recur — recur_for_count","text":"updated rrule.","code":""},{"path":"/dev/reference/recur_for_count.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Control the number of times to recur — recur_for_count","text":"Remember number times occurrence occurred counted since date limited date! Adjust necessary get desired results.","code":""},{"path":"/dev/reference/recur_for_count.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Control the number of times to recur — recur_for_count","text":"","code":"# Using the default `since` date daily_since_epoch_for_5 <- daily() %>% recur_for_count(5)  alma_search(\"1969-12-31\", \"1970-01-25\", daily_since_epoch_for_5) #> Date of length 0  # Changing the `since` date daily_since_2019_for_5 <- daily(since = \"2019-01-01\") %>% recur_for_count(5)  alma_search(\"2018-12-31\", \"2019-01-25\", daily_since_2019_for_5) #> [1] \"2019-01-01\" \"2019-01-02\" \"2019-01-03\" \"2019-01-04\" \"2019-01-05\"  # In the case of \"impossible\" dates, such as 2019-02-31 and 2019-04-31 in the # example below, they are not added to the total count. Only true event # dates are counted. on_31_for_5 <- monthly(since = \"2019-01-01\") %>%   recur_on_day_of_month(31) %>%   recur_for_count(5)  alma_search(\"2019-01-01\", \"2020-01-01\", on_31_for_5) #> [1] \"2019-01-31\" \"2019-03-31\" \"2019-05-31\" \"2019-07-31\" \"2019-08-31\""},{"path":"/dev/reference/recur_on_day_of_month.html","id":null,"dir":"Reference","previous_headings":"","what":"Recur on a day of the month — recur_on_day_of_month","title":"Recur on a day of the month — recur_on_day_of_month","text":"recur_on_day_of_month() recurs specific day month.","code":""},{"path":"/dev/reference/recur_on_day_of_month.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Recur on a day of the month — recur_on_day_of_month","text":"","code":"recur_on_day_of_month(x, day)"},{"path":"/dev/reference/recur_on_day_of_month.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Recur on a day of the month — recur_on_day_of_month","text":"x [rrule] recurrence rule. day [integer] days month recur. Negative values allowed, specify n days end month.","code":""},{"path":"/dev/reference/recur_on_day_of_month.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Recur on a day of the month — recur_on_day_of_month","text":"updated rrule.","code":""},{"path":"/dev/reference/recur_on_day_of_month.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Recur on a day of the month — recur_on_day_of_month","text":"day month exist particular month, ignored. example, recur_on_day_of_month(30) set, never generate event February.","code":""},{"path":"/dev/reference/recur_on_day_of_month.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Recur on a day of the month — recur_on_day_of_month","text":"","code":"# When used with a yearly or monthly frequency, `recur_on_day_of_month()` # expands the number of days in the event set. on_yearly <- yearly() on_yearly_day_of_month_1_to_2 <- on_yearly %>% recur_on_day_of_month(1:2)  start <- \"1999-01-01\" end <- \"2000-06-30\"  alma_search(start, end, on_yearly) #> [1] \"1999-01-01\" \"2000-01-01\" alma_search(start, end, on_yearly_day_of_month_1_to_2) #>  [1] \"1999-01-01\" \"1999-01-02\" \"1999-02-01\" \"1999-02-02\" \"1999-03-01\" #>  [6] \"1999-03-02\" \"1999-04-01\" \"1999-04-02\" \"1999-05-01\" \"1999-05-02\" #> [11] \"1999-06-01\" \"1999-06-02\" \"1999-07-01\" \"1999-07-02\" \"1999-08-01\" #> [16] \"1999-08-02\" \"1999-09-01\" \"1999-09-02\" \"1999-10-01\" \"1999-10-02\" #> [21] \"1999-11-01\" \"1999-11-02\" \"1999-12-01\" \"1999-12-02\" \"2000-01-01\" #> [26] \"2000-01-02\" \"2000-02-01\" \"2000-02-02\" \"2000-03-01\" \"2000-03-02\" #> [31] \"2000-04-01\" \"2000-04-02\" \"2000-05-01\" \"2000-05-02\" \"2000-06-01\" #> [36] \"2000-06-02\"  # When used with a daily frequency, `recur_on_day_of_month()` limits the # number of days in the event set. on_daily <- daily() on_daily_day_of_month_1_to_2 <- on_daily %>% recur_on_day_of_month(1:2)  length(alma_search(start, end, on_daily)) #> [1] 547 length(alma_search(start, end, on_daily_day_of_month_1_to_2)) #> [1] 36  # Using a negative value is a powerful way to look back from the end of the # month. This is particularly useful because months don't have the same # number of days. on_last_of_month <- monthly() %>% recur_on_day_of_month(-1)  alma_search(start, end, on_last_of_month) #>  [1] \"1999-01-31\" \"1999-02-28\" \"1999-03-31\" \"1999-04-30\" \"1999-05-31\" #>  [6] \"1999-06-30\" \"1999-07-31\" \"1999-08-31\" \"1999-09-30\" \"1999-10-31\" #> [11] \"1999-11-30\" \"1999-12-31\" \"2000-01-31\" \"2000-02-29\" \"2000-03-31\" #> [16] \"2000-04-30\" \"2000-05-31\" \"2000-06-30\"  # If you want particular days of the week at the end of the month, you # could use something like this, which checks if the end of the month # is also a Friday. on_last_of_month_that_is_also_friday <- on_last_of_month %>% recur_on_day_of_week(\"Friday\") alma_search(start, end, on_last_of_month_that_is_also_friday) #> [1] \"1999-04-30\" \"1999-12-31\" \"2000-03-31\" \"2000-06-30\"  # But you probably wanted this, which takes the last friday of the month, # on whatever day that lands on on_last_friday_of_month <- monthly() %>% recur_on_day_of_week(\"Friday\", nth = -1) alma_search(start, end, on_last_friday_of_month) #>  [1] \"1999-01-29\" \"1999-02-26\" \"1999-03-26\" \"1999-04-30\" \"1999-05-28\" #>  [6] \"1999-06-25\" \"1999-07-30\" \"1999-08-27\" \"1999-09-24\" \"1999-10-29\" #> [11] \"1999-11-26\" \"1999-12-31\" \"2000-01-28\" \"2000-02-25\" \"2000-03-31\" #> [16] \"2000-04-28\" \"2000-05-26\" \"2000-06-30\""},{"path":"/dev/reference/recur_on_day_of_week.html","id":null,"dir":"Reference","previous_headings":"","what":"Recur on a day of the week — recur_on_day_of_week","title":"Recur on a day of the week — recur_on_day_of_week","text":"recur_on_day_of_week() recurs specific day week. recur_on_weekends() recur_on_weekdays() helpers recurring weekends weekdays.","code":""},{"path":"/dev/reference/recur_on_day_of_week.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Recur on a day of the week — recur_on_day_of_week","text":"","code":"recur_on_day_of_week(x, day, ..., nth = NULL)  recur_on_weekdays(x)  recur_on_weekends(x)"},{"path":"/dev/reference/recur_on_day_of_week.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Recur on a day of the week — recur_on_day_of_week","text":"x [rrule] recurrence rule. day [integer / character] Days week recur . Integer values must 1 7, 1 = Monday 7 = Sunday. also allowed full weekday string like \"Tuesday\", abbreviation like \"Tues\". ... dots future extensions must empty. nth [integer / NULL] Limit n-th occurrence day base frequency. example, monthly frequency, using nth = -1 limit last day month. default NULL chooses occurrences.","code":""},{"path":"/dev/reference/recur_on_day_of_week.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Recur on a day of the week — recur_on_day_of_week","text":"updated rrule.","code":""},{"path":"/dev/reference/recur_on_day_of_week.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Recur on a day of the week — recur_on_day_of_week","text":"Multiple week day values allowed, nth applied . want apply different nth values different days week, call recur_on_day_of_week() twice different day values. particularly important pay attention since date using weekly rules. day week use comes since date, , default, Monday (1900-01-01). See almanac_since() information.","code":""},{"path":"/dev/reference/recur_on_day_of_week.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Recur on a day of the week — recur_on_day_of_week","text":"","code":"# Using default `since` (1900-01-01, a Monday) on_weekly_mondays <- weekly()  start <- \"1999-01-01\" # <- a Friday end <- \"1999-03-01\"  # This finds the first Monday, and then continues from there alma_search(start, end, on_weekly_mondays) #> [1] \"1999-01-04\" \"1999-01-11\" \"1999-01-18\" \"1999-01-25\" \"1999-02-01\" #> [6] \"1999-02-08\" \"1999-02-15\" \"1999-02-22\" \"1999-03-01\"  # We start counting from a Friday here on_weekly_fridays <- weekly(since = start) alma_search(start, end, on_weekly_fridays) #> [1] \"1999-01-01\" \"1999-01-08\" \"1999-01-15\" \"1999-01-22\" \"1999-01-29\" #> [6] \"1999-02-05\" \"1999-02-12\" \"1999-02-19\" \"1999-02-26\"  # Alternatively, we could use `recur_on_day_of_week()` and force a recurrence # rule on Friday on_forced_friday <- on_weekly_mondays %>% recur_on_day_of_week(\"Friday\") alma_search(start, end, on_forced_friday) #> [1] \"1999-01-01\" \"1999-01-08\" \"1999-01-15\" \"1999-01-22\" \"1999-01-29\" #> [6] \"1999-02-05\" \"1999-02-12\" \"1999-02-19\" \"1999-02-26\"  # At monthly frequencies, you can use n-th values to look for particular # week day events on_first_friday_in_month <- monthly() %>% recur_on_day_of_week(\"Fri\", nth = 1) alma_search(start, end, on_first_friday_in_month) #> [1] \"1999-01-01\" \"1999-02-05\"  # Negative values let you look from the back on_last_friday_in_month <- monthly() %>% recur_on_day_of_week(\"Fri\", nth = -1) alma_search(start, end, on_last_friday_in_month) #> [1] \"1999-01-29\" \"1999-02-26\"  # At yearly frequencies, this looks for the first sunday of the year on_first_sunday_in_year <- yearly() %>% recur_on_day_of_week(\"Sunday\", nth = 1) alma_search(start, end, on_first_sunday_in_year) #> [1] \"1999-01-03\"  # Last week day of the month last_weekday_of_month <- monthly() %>%   # Last occurrence of each weekday in the month   recur_on_day_of_week(c(\"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\"), nth = -1) %>%   # Now choose the last one of those in each month   recur_on_position(-1)  alma_search(start, end, last_weekday_of_month) #> [1] \"1999-01-29\" \"1999-02-26\""},{"path":"/dev/reference/recur_on_day_of_year.html","id":null,"dir":"Reference","previous_headings":"","what":"Recur on a day of the year — recur_on_day_of_year","title":"Recur on a day of the year — recur_on_day_of_year","text":"recur_on_day_of_year() recurs specific day year.","code":""},{"path":"/dev/reference/recur_on_day_of_year.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Recur on a day of the year — recur_on_day_of_year","text":"","code":"recur_on_day_of_year(x, day)"},{"path":"/dev/reference/recur_on_day_of_year.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Recur on a day of the year — recur_on_day_of_year","text":"x [rrule] recurrence rule. day [integer] Days year recur . Values must [-366, -1] [1, 366].","code":""},{"path":"/dev/reference/recur_on_day_of_year.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Recur on a day of the year — recur_on_day_of_year","text":"updated rrule.","code":""},{"path":"/dev/reference/recur_on_day_of_year.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Recur on a day of the year — recur_on_day_of_year","text":"","code":"library(lubridate, warn.conflicts = FALSE)  on_5th_day_of_year <- yearly() %>% recur_on_day_of_year(5)  alma_search(\"1999-01-01\", \"2000-12-31\", on_5th_day_of_year) #> [1] \"1999-01-05\" \"2000-01-05\"  # Notice that if you use a `since` date that has a day of the year # after the specified one, it rolls to the next year on_5th_day_of_year2 <- yearly(since = \"1999-01-06\") %>% recur_on_day_of_year(5) alma_search(\"1999-01-01\", \"2000-12-31\", on_5th_day_of_year2) #> [1] \"2000-01-05\"  # Negative values select from the back, which is useful in leap years leap_year(as.Date(\"2000-01-01\")) #> [1] TRUE  last_day_of_year <- yearly() %>% recur_on_day_of_year(-1) last_day_of_year_bad <- yearly() %>% recur_on_day_of_year(365)  alma_search(\"1999-01-01\", \"2000-12-31\", last_day_of_year) #> [1] \"1999-12-31\" \"2000-12-31\" alma_search(\"1999-01-01\", \"2000-12-31\", last_day_of_year_bad) #> [1] \"1999-12-31\" \"2000-12-30\""},{"path":"/dev/reference/recur_on_easter.html","id":null,"dir":"Reference","previous_headings":"","what":"Recur on easter — recur_on_easter","title":"Recur on easter — recur_on_easter","text":"recur_on_easter() special helper recur Easter. Easter particularly difficult construct recurrence rule .","code":""},{"path":"/dev/reference/recur_on_easter.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Recur on easter — recur_on_easter","text":"","code":"recur_on_easter(x, offset = NULL)"},{"path":"/dev/reference/recur_on_easter.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Recur on easter — recur_on_easter","text":"x [rrule] recurrence rule. offset  [integer(1)] Deprecated favor using roffset() directly. offset terms number days either side Easter recur . offset must still fall within year, otherwise date silently ignored.","code":""},{"path":"/dev/reference/recur_on_easter.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Recur on easter — recur_on_easter","text":"updated rrule.","code":""},{"path":"/dev/reference/recur_on_easter.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Recur on easter — recur_on_easter","text":"","code":"on_easter <- yearly() %>% recur_on_easter()  # Rather than: if (FALSE) { on_easter_monday <- yearly() %>% recur_on_easter(1) }  # Please use: on_easter_monday <- roffset(on_easter, 1)  alma_search(\"1999-01-01\", \"2001-01-01\", on_easter) #> [1] \"1999-04-04\" \"2000-04-23\"  both <- runion(on_easter, on_easter_monday)  alma_search(\"1999-01-01\", \"2001-01-01\", both) #> [1] \"1999-04-04\" \"1999-04-05\" \"2000-04-23\" \"2000-04-24\""},{"path":"/dev/reference/recur_on_interval.html","id":null,"dir":"Reference","previous_headings":"","what":"Recur on an interval — recur_on_interval","title":"Recur on an interval — recur_on_interval","text":"recur_on_interval() adjusts interval base frequency recurrence rule. example, monthly() rule interval 2 become \"every month\".","code":""},{"path":"/dev/reference/recur_on_interval.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Recur on an interval — recur_on_interval","text":"","code":"recur_on_interval(x, n)"},{"path":"/dev/reference/recur_on_interval.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Recur on an interval — recur_on_interval","text":"x [rrule] recurrence rule. n [positive integer(1)] interval recur.","code":""},{"path":"/dev/reference/recur_on_interval.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Recur on an interval — recur_on_interval","text":"updated rrule.","code":""},{"path":"/dev/reference/recur_on_interval.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Recur on an interval — recur_on_interval","text":"","code":"# The default interval is 1 on_monthly <- monthly(since = \"1999-01-01\")  alma_search(\"1999-01-01\", \"1999-06-01\", on_monthly) #> [1] \"1999-01-01\" \"1999-02-01\" \"1999-03-01\" \"1999-04-01\" \"1999-05-01\" #> [6] \"1999-06-01\"  # Adjust to every other month on_every_other_month <- on_monthly %>% recur_on_interval(2)  alma_search(\"1999-01-01\", \"1999-06-01\", on_every_other_month) #> [1] \"1999-01-01\" \"1999-03-01\" \"1999-05-01\"  # Note that the frequency is limited to \"every other month\", but you # can still have multiple events inside a single month on_every_other_month_on_day_25_or_26 <- on_every_other_month %>%   recur_on_day_of_month(25:26)  alma_search(\"1999-01-01\", \"1999-06-01\", on_every_other_month_on_day_25_or_26) #> [1] \"1999-01-25\" \"1999-01-26\" \"1999-03-25\" \"1999-03-26\" \"1999-05-25\" #> [6] \"1999-05-26\""},{"path":"/dev/reference/recur_on_month_of_year.html","id":null,"dir":"Reference","previous_headings":"","what":"Recur on a month of the year — recur_on_month_of_year","title":"Recur on a month of the year — recur_on_month_of_year","text":"recur_on_month_of_year() recurs specific month year.","code":""},{"path":"/dev/reference/recur_on_month_of_year.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Recur on a month of the year — recur_on_month_of_year","text":"","code":"recur_on_month_of_year(x, month)"},{"path":"/dev/reference/recur_on_month_of_year.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Recur on a month of the year — recur_on_month_of_year","text":"x [rrule] recurrence rule. month [integer / character] Months year mark events. Integer values must [1, 12]. can also full month string like \"November\", abbreviation like \"Nov\".","code":""},{"path":"/dev/reference/recur_on_month_of_year.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Recur on a month of the year — recur_on_month_of_year","text":"updated rrule.","code":""},{"path":"/dev/reference/recur_on_month_of_year.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Recur on a month of the year — recur_on_month_of_year","text":"","code":"# There is a big difference between adding this rule to a `yearly()` # or `monthly()` frequency, and a `daily()` frequency.  # Limit from every day to every day in February on_feb_daily <- daily() %>% recur_on_month_of_year(\"Feb\")  # Limit from 1 day per month to 1 day in February on_feb_monthly <- monthly() %>% recur_on_month_of_year(\"Feb\")  start <- \"1999-01-01\" end <- \"2001-01-01\"  alma_search(start, end, on_feb_daily) #>  [1] \"1999-02-01\" \"1999-02-02\" \"1999-02-03\" \"1999-02-04\" \"1999-02-05\" #>  [6] \"1999-02-06\" \"1999-02-07\" \"1999-02-08\" \"1999-02-09\" \"1999-02-10\" #> [11] \"1999-02-11\" \"1999-02-12\" \"1999-02-13\" \"1999-02-14\" \"1999-02-15\" #> [16] \"1999-02-16\" \"1999-02-17\" \"1999-02-18\" \"1999-02-19\" \"1999-02-20\" #> [21] \"1999-02-21\" \"1999-02-22\" \"1999-02-23\" \"1999-02-24\" \"1999-02-25\" #> [26] \"1999-02-26\" \"1999-02-27\" \"1999-02-28\" \"2000-02-01\" \"2000-02-02\" #> [31] \"2000-02-03\" \"2000-02-04\" \"2000-02-05\" \"2000-02-06\" \"2000-02-07\" #> [36] \"2000-02-08\" \"2000-02-09\" \"2000-02-10\" \"2000-02-11\" \"2000-02-12\" #> [41] \"2000-02-13\" \"2000-02-14\" \"2000-02-15\" \"2000-02-16\" \"2000-02-17\" #> [46] \"2000-02-18\" \"2000-02-19\" \"2000-02-20\" \"2000-02-21\" \"2000-02-22\" #> [51] \"2000-02-23\" \"2000-02-24\" \"2000-02-25\" \"2000-02-26\" \"2000-02-27\" #> [56] \"2000-02-28\" \"2000-02-29\"  alma_search(start, end, on_feb_monthly) #> [1] \"1999-02-01\" \"2000-02-01\""},{"path":"/dev/reference/recur_on_position.html","id":null,"dir":"Reference","previous_headings":"","what":"Recur on a position within a frequency — recur_on_position","title":"Recur on a position within a frequency — recur_on_position","text":"recur_on_position() fine tuned control element set select within base frequency.","code":""},{"path":"/dev/reference/recur_on_position.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Recur on a position within a frequency — recur_on_position","text":"","code":"recur_on_position(x, n)"},{"path":"/dev/reference/recur_on_position.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Recur on a position within a frequency — recur_on_position","text":"x [rrule] recurrence rule. n [integer] positions select within intrafrequency set. Negative numbers select end set.","code":""},{"path":"/dev/reference/recur_on_position.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Recur on a position within a frequency — recur_on_position","text":"updated rrule.","code":""},{"path":"/dev/reference/recur_on_position.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Recur on a position within a frequency — recur_on_position","text":"","code":"library(lubridate, warn.conflicts = FALSE)  start <- \"1999-01-01\" end <- \"1999-05-01\"  # You might want the last day of the month that is either a # Sunday or a Monday, but you don't want to return both. # This would return both: on_last_monday_and_sunday <- monthly() %>%   recur_on_day_of_week(c(\"Monday\", \"Sunday\"), nth = -1)  alma_search(start, end, on_last_monday_and_sunday) #> [1] \"1999-01-25\" \"1999-01-31\" \"1999-02-22\" \"1999-02-28\" \"1999-03-28\" #> [6] \"1999-03-29\" \"1999-04-25\" \"1999-04-26\"  # To return just the last one, you would select the last value in # the set, which is computed on a per month basis on_very_last_monday_or_sunday <- on_last_monday_and_sunday %>%   recur_on_position(-1)  alma_search(start, end, on_very_last_monday_or_sunday) #> [1] \"1999-01-31\" \"1999-02-28\" \"1999-03-29\" \"1999-04-26\"  wday(alma_search(start, end, on_very_last_monday_or_sunday), label = TRUE) #> [1] Sun Sun Mon Mon #> Levels: Sun < Mon < Tue < Wed < Thu < Fri < Sat"},{"path":"/dev/reference/recur_on_week_of_year.html","id":null,"dir":"Reference","previous_headings":"","what":"Recur on a week of the year — recur_on_week_of_year","title":"Recur on a week of the year — recur_on_week_of_year","text":"recur_on_week_of_year() recurs specific week year.","code":""},{"path":"/dev/reference/recur_on_week_of_year.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Recur on a week of the year — recur_on_week_of_year","text":"","code":"recur_on_week_of_year(x, week)"},{"path":"/dev/reference/recur_on_week_of_year.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Recur on a week of the year — recur_on_week_of_year","text":"x [rrule] recurrence rule. week [integer] Weeks year recur . Integer values must [1, 53] [-53, -1].","code":""},{"path":"/dev/reference/recur_on_week_of_year.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Recur on a week of the year — recur_on_week_of_year","text":"updated rrule.","code":""},{"path":"/dev/reference/recur_on_week_of_year.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Recur on a week of the year — recur_on_week_of_year","text":"Weekly rules implemented according ISO-8601 standard. requires first week year first one containing least 4 days new year. Additionally, week start week day specified recur_with_week_start(), defaults Monday.","code":""},{"path":"/dev/reference/recur_on_week_of_year.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Recur on a week of the year — recur_on_week_of_year","text":"","code":"# Weekly rules are a bit tricky because they are implemented to comply # with ISO-8601 standards, which require that the first week of the year # is when there are at least 4 days in that year, and the week starts on # the week day specified by `recur_with_week_start()` (Monday by default). on_first_week <- yearly() %>% recur_on_week_of_year(1)  # In 2017: # - Look at dates 1-4 # - 2017-01-02 is a Monday, so start the first week here alma_search(\"2017-01-01\", \"2017-01-25\", on_first_week) #> [1] \"2017-01-02\" \"2017-01-03\" \"2017-01-04\" \"2017-01-05\" \"2017-01-06\" #> [6] \"2017-01-07\" \"2017-01-08\"  # In 2015: # - Look at dates 1-4 # - None of these are Monday, so the start of the week is #   in the previous year # - Look at 2014 and find the last Monday, 2014-12-29. This is the start of #   the first week in 2015. alma_search(\"2014-12-25\", \"2015-01-25\", on_first_week) #> [1] \"2014-12-29\" \"2014-12-30\" \"2014-12-31\" \"2015-01-01\" \"2015-01-02\" #> [6] \"2015-01-03\" \"2015-01-04\"  # Say we want the start of the week to be Sunday instead of Monday!  # In 2015: # - Look at dates 1-4 # - 2015-01-04 is a Sunday, so start the first week here on_first_week_sun <- yearly() %>%   recur_on_week_of_year(1) %>%   recur_with_week_start(\"Sunday\")  alma_search(\"2014-12-25\", \"2015-01-25\", on_first_week_sun) #> [1] \"2015-01-04\" \"2015-01-05\" \"2015-01-06\" \"2015-01-07\" \"2015-01-08\" #> [6] \"2015-01-09\" \"2015-01-10\""},{"path":"/dev/reference/recur_with_week_start.html","id":null,"dir":"Reference","previous_headings":"","what":"Control the start of the week — recur_with_week_start","title":"Control the start of the week — recur_with_week_start","text":"recur_with_week_start() controls week day represents start week. important rules use recur_on_week_of_year(). default day week start Monday.","code":""},{"path":"/dev/reference/recur_with_week_start.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Control the start of the week — recur_with_week_start","text":"","code":"recur_with_week_start(x, day)"},{"path":"/dev/reference/recur_with_week_start.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Control the start of the week — recur_with_week_start","text":"x [rrule] recurrence rule. day [integer(1) / character(1)] Day week start week . Must integer value [1, 7], 1 = Monday 7 = Sunday. also allowed full weekday string like \"Tuesday\", abbreviation like \"Tues\".","code":""},{"path":"/dev/reference/recur_with_week_start.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Control the start of the week — recur_with_week_start","text":"updated rrule.","code":""},{"path":"/dev/reference/recur_with_week_start.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Control the start of the week — recur_with_week_start","text":"","code":"# Weekly rules are a bit tricky because they are implemented to comply # with ISO-8601 standards, which require that the first week of the year # is when there are at least 4 days in that year, and the week starts on # the week day specified by `recur_with_week_start()` (Monday by default). on_first_week <- yearly() %>% recur_on_week_of_year(1)  # In 2017: # - Look at dates 1-4 # - 2017-01-02 is a Monday, so start the first week here alma_search(\"2017-01-01\", \"2017-01-25\", on_first_week) #> [1] \"2017-01-02\" \"2017-01-03\" \"2017-01-04\" \"2017-01-05\" \"2017-01-06\" #> [6] \"2017-01-07\" \"2017-01-08\"  # In 2015: # - Look at dates 1-4 # - None of these are Monday, so the start of the week is #   in the previous year # - Look at 2014 and find the last Monday, 2014-12-29. This is the start of #   the first week in 2015. alma_search(\"2014-12-25\", \"2015-01-25\", on_first_week) #> [1] \"2014-12-29\" \"2014-12-30\" \"2014-12-31\" \"2015-01-01\" \"2015-01-02\" #> [6] \"2015-01-03\" \"2015-01-04\"  # Say we want the start of the week to be Sunday instead of Monday!  # In 2015: # - Look at dates 1-4 # - 2015-01-04 is a Sunday, so start the first week here on_first_week_sun <- yearly() %>%   recur_on_week_of_year(1) %>%   recur_with_week_start(\"Sunday\")  alma_search(\"2014-12-25\", \"2015-01-25\", on_first_week_sun) #> [1] \"2015-01-04\" \"2015-01-05\" \"2015-01-06\" \"2015-01-07\" \"2015-01-08\" #> [6] \"2015-01-09\" \"2015-01-10\""},{"path":"/dev/reference/rholiday.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a recurring holiday — rholiday","title":"Create a recurring holiday — rholiday","text":"rholiday() used create custom holidays. wraps holiday name corresponding rschedule holiday object special properties. Holiday objects can tweaked hol_rename(), hol_observe(), hol_offset(), can added calendar rcalendar().","code":""},{"path":"/dev/reference/rholiday.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a recurring holiday — rholiday","text":"","code":"rholiday(rschedule, name)"},{"path":"/dev/reference/rholiday.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a recurring holiday — rholiday","text":"rschedule [rschedule] recurrence schedule determines holiday occurs. name [character(1)] name holiday. serves unique identifier adding multiple holidays rcalendar().","code":""},{"path":"/dev/reference/rholiday.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create a recurring holiday — rholiday","text":"","code":"on_christmas <- yearly() %>%   recur_on_month_of_year(\"Dec\") %>%   recur_on_day_of_month(25)  # Bundle a holiday name with its recurrence schedule to create a holiday rholiday(on_christmas, \"Christmas\") #> <Christmas> #>  <rrule> #>  • frequency: yearly #>  • range: [1900-01-01, 2100-01-01] #>  • month of year: Dec #>  • day of month: 25  # This is how the built in holiday objects are created hol_christmas() #> <Christmas> #>  <rrule> #>  • frequency: yearly #>  • range: [1900-01-01, 2100-01-01] #>  • month of year: Dec #>  • day of month: 25"},{"path":"/dev/reference/roffset.html","id":null,"dir":"Reference","previous_headings":"","what":"Create an offset rschedule — roffset","title":"Create an offset rschedule — roffset","text":"roffset() creates new rschedule events offset existing rschedule certain amount. can useful generating relative events like \"day Christmas.\"","code":""},{"path":"/dev/reference/roffset.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create an offset rschedule — roffset","text":"","code":"roffset(rschedule, by)"},{"path":"/dev/reference/roffset.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create an offset rschedule — roffset","text":"rschedule [rschedule] rschedule offset. [integer(1)] single integer offset .","code":""},{"path":"/dev/reference/roffset.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create an offset rschedule — roffset","text":"offset rschedule.","code":""},{"path":"/dev/reference/roffset.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create an offset rschedule — roffset","text":"","code":"on_christmas <- yearly() %>%   recur_on_month_of_year(\"Dec\") %>%   recur_on_day_of_month(25)  on_day_after_christmas <- roffset(on_christmas, by = 1)  alma_search(\"2018-01-01\", \"2023-01-01\", on_day_after_christmas) #> [1] \"2018-12-26\" \"2019-12-26\" \"2020-12-26\" \"2021-12-26\" \"2022-12-26\"  # Now what if you want the observed holiday representing the day after # Christmas? on_weekends <- weekly() %>% recur_on_weekends()  # Adjust Christmas to the nearest weekday on_christmas <- radjusted(on_christmas, on_weekends, adj_nearest)  # Offset by 1 and then adjust that to the following weekday. # We never adjust backwards because that can coincide with the observed day # for Christmas. on_day_after_christmas <- on_christmas %>%   roffset(by = 1) %>%   radjusted(on_weekends, adj_following)  # Note that: # - A Christmas on Friday the 24th resulted in a day after Christmas of #   Monday the 27th # - A Christmas on Monday the 26th resulted in a day after Christmas of #   Tuesday the 27th christmas <- alma_search(\"2018-01-01\", \"2023-01-01\", on_christmas) day_after_christmas <- alma_search(\"2018-01-01\", \"2023-01-01\", on_day_after_christmas)  lubridate::wday(christmas, label = TRUE) #> [1] Tue Wed Fri Fri Mon #> Levels: Sun < Mon < Tue < Wed < Thu < Fri < Sat lubridate::wday(day_after_christmas, label = TRUE) #> [1] Wed Thu Mon Mon Tue #> Levels: Sun < Mon < Tue < Wed < Thu < Fri < Sat"},{"path":"/dev/reference/rrule.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a recurrence rule — rrule","title":"Create a recurrence rule — rrule","text":"functions allow create recurrence rule specified frequency. base elements recurrence rules. add , use one recur_*() functions. daily() Recur daily frequency. weekly() Recur weekly frequency. monthly() Recur monthly frequency. yearly() Recur yearly frequency.","code":""},{"path":"/dev/reference/rrule.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a recurrence rule — rrule","text":"","code":"daily(since = NULL, until = NULL)  weekly(since = NULL, until = NULL)  monthly(since = NULL, until = NULL)  yearly(since = NULL, until = NULL)"},{"path":"/dev/reference/rrule.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a recurrence rule — rrule","text":"since [Date(1)] lower bound event set. Depending final recurrence rule, pieces information anchor date might used generate complete recurrence rule. [Date(1)] upper bound event set.","code":""},{"path":"/dev/reference/rrule.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create a recurrence rule — rrule","text":"new empty rrule.","code":""},{"path":"/dev/reference/rrule.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Create a recurrence rule — rrule","text":"default, since == \"1900-01-01\" == \"2100-01-01\", capture use cases well still performant. may need adjust dates want events outside range. See almanac_since() almanac_until() information. terms speed, generally efficient adjust since date closer first date sequence dates working . example, working dates range 2019 forward, adjust since date 2019-01-01 significant speed boost. anchor date, events often calculated relative date. example, rule \"Monday, every week\" use since date find first Monday start recurrence . quarterly() recurrence frequency, can accomplished monthly() %>% recur_on_interval(3). month start quarterly interval pulled since date inside monthly(). default use quarterly rule starting January since default since date 1900-01-01. See examples.","code":""},{"path":"/dev/reference/rrule.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create a recurrence rule — rrule","text":"","code":"rrule <- monthly() %>% recur_on_day_of_month(25)  alma_search(\"1970-01-01\", \"1971-01-01\", rrule) #>  [1] \"1970-01-25\" \"1970-02-25\" \"1970-03-25\" \"1970-04-25\" \"1970-05-25\" #>  [6] \"1970-06-25\" \"1970-07-25\" \"1970-08-25\" \"1970-09-25\" \"1970-10-25\" #> [11] \"1970-11-25\" \"1970-12-25\"  # Notice that dates before 1900-01-01 are never generated with the defaults! alma_search(\"1899-01-01\", \"1901-01-01\", rrule) #>  [1] \"1900-01-25\" \"1900-02-25\" \"1900-03-25\" \"1900-04-25\" \"1900-05-25\" #>  [6] \"1900-06-25\" \"1900-07-25\" \"1900-08-25\" \"1900-09-25\" \"1900-10-25\" #> [11] \"1900-11-25\" \"1900-12-25\"  # Adjust the `since` date to get access to these dates rrule_pre_1900 <- monthly(since = \"1850-01-01\") %>% recur_on_day_of_month(25) alma_search(\"1899-01-01\", \"1901-01-01\", rrule_pre_1900) #>  [1] \"1899-01-25\" \"1899-02-25\" \"1899-03-25\" \"1899-04-25\" \"1899-05-25\" #>  [6] \"1899-06-25\" \"1899-07-25\" \"1899-08-25\" \"1899-09-25\" \"1899-10-25\" #> [11] \"1899-11-25\" \"1899-12-25\" \"1900-01-25\" \"1900-02-25\" \"1900-03-25\" #> [16] \"1900-04-25\" \"1900-05-25\" \"1900-06-25\" \"1900-07-25\" \"1900-08-25\" #> [21] \"1900-09-25\" \"1900-10-25\" \"1900-11-25\" \"1900-12-25\"  # A quarterly recurrence rule can be built from # `monthly()` and `recur_on_interval()` on_first_of_the_quarter <- monthly() %>%   recur_on_interval(3) %>%   recur_on_day_of_month(1)  alma_search(\"1999-01-01\", \"2000-04-01\", on_first_of_the_quarter) #> [1] \"1999-01-01\" \"1999-04-01\" \"1999-07-01\" \"1999-10-01\" \"2000-01-01\" #> [6] \"2000-04-01\"  # Alter the starting quarter by altering the `since` date on_first_of_the_quarter_starting_in_feb <- monthly(since = \"1998-02-01\") %>%   recur_on_interval(3) %>%   recur_on_day_of_month(1)  alma_search(   \"1999-01-01\",   \"2000-04-01\",   on_first_of_the_quarter_starting_in_feb ) #> [1] \"1999-02-01\" \"1999-05-01\" \"1999-08-01\" \"1999-11-01\" \"2000-02-01\""},{"path":"/dev/reference/rset-add.html","id":null,"dir":"Reference","previous_headings":"","what":"Deprecated rset helpers — rset-add","title":"Deprecated rset helpers — rset-add","text":"add_rschedule() deprecated favor using ... arguments runion(), rintersect(), rsetdiff() directly. add_rdates() deprecated favor using runion() combination custom rcustom() rschedule holding required dates. add_exdates() deprecated favor using rsetdiff() combination custom rcustom() rschedule holding excluded dates.","code":""},{"path":"/dev/reference/rset-add.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Deprecated rset helpers — rset-add","text":"","code":"add_rschedule(x, rschedule)  add_rdates(x, rdates)  add_exdates(x, exdates)"},{"path":"/dev/reference/rset-add.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Deprecated rset helpers — rset-add","text":"x [rset] rset add . rschedule [rschedule] rschedule, rrule, runion, rintersect, rsetdiff. rdates [Date] Dates forcibly include rset. exdates [Date] Dates forcibly exclude rset.","code":""},{"path":"/dev/reference/rset-add.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Deprecated rset helpers — rset-add","text":"updated rset.","code":""},{"path":"/dev/reference/rset-add.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Deprecated rset helpers — rset-add","text":"","code":"on_thanksgiving <- yearly() %>%   recur_on_day_of_week(\"Thurs\", nth = 4) %>%   recur_on_month_of_year(\"Nov\")  on_christmas <- yearly() %>%   recur_on_day_of_month(25) %>%   recur_on_month_of_year(\"Dec\")  on_labor_day <- monthly() %>%   recur_on_month_of_year(\"Sep\") %>%   recur_on_day_of_week(\"Mon\", nth = 1)  # Rather than: if (FALSE) { rb <- runion() %>%   add_rschedule(on_thanksgiving) %>%   add_rschedule(on_christmas) %>%   add_rschedule(on_labor_day) }  # Use the `...` of the `runion()` helper directly: rb <- runion(on_thanksgiving, on_christmas, on_labor_day)  # Thanksgiving, Christmas, or Labor Day alma_search(\"2019-01-01\", \"2021-01-01\", rb) #> [1] \"2019-09-02\" \"2019-11-28\" \"2019-12-25\" \"2020-09-07\" \"2020-11-26\" #> [6] \"2020-12-25\"  # Except Labor Day in 2019 # Rather than: if (FALSE) { rb2 <- add_exdates(rb, \"2019-09-02\") }  # We recommend: rb2 <- rsetdiff(rb, rcustom(\"2019-09-02\"))  alma_search(\"2019-01-01\", \"2021-01-01\", rb2) #> [1] \"2019-11-28\" \"2019-12-25\" \"2020-09-07\" \"2020-11-26\" \"2020-12-25\""},{"path":"/dev/reference/rset.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a new set-based recurrence schedule — rset","title":"Create a new set-based recurrence schedule — rset","text":"Often, single rrule sufficient. However, complex recurrence objects can constructed combining multiple rschedules recurrence set. three types recurrence sets provided almanac, construct event sets performing set operation underlying events rschedules set. runion() takes union. rintersect() takes intersection. rsetdiff() takes set difference.","code":""},{"path":"/dev/reference/rset.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a new set-based recurrence schedule — rset","text":"","code":"runion(...)  rintersect(...)  rsetdiff(...)"},{"path":"/dev/reference/rset.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a new set-based recurrence schedule — rset","text":"... [rschedules] rschedule objects add set.","code":""},{"path":"/dev/reference/rset.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create a new set-based recurrence schedule — rset","text":"runion, rintersect, rsetdiff.","code":""},{"path":"/dev/reference/rset.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Create a new set-based recurrence schedule — rset","text":"rsetdiff(), event set created \"left right\" depends order rschedules added set.","code":""},{"path":"/dev/reference/rset.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create a new set-based recurrence schedule — rset","text":"","code":"since <- \"2019-04-01\" until <- \"2019-05-31\"  on_weekends <- weekly(since = since, until = until) %>%   recur_on_weekends()  on_25th <- monthly(since = since, until = until) %>%   recur_on_day_of_month(25)  # On weekends OR the 25th of the month ru <- runion(on_weekends, on_25th) alma_events(ru) #>  [1] \"2019-04-06\" \"2019-04-07\" \"2019-04-13\" \"2019-04-14\" \"2019-04-20\" #>  [6] \"2019-04-21\" \"2019-04-25\" \"2019-04-27\" \"2019-04-28\" \"2019-05-04\" #> [11] \"2019-05-05\" \"2019-05-11\" \"2019-05-12\" \"2019-05-18\" \"2019-05-19\" #> [16] \"2019-05-25\" \"2019-05-26\"  # On weekends AND the 25th of the month ri <- rintersect(on_weekends, on_25th) alma_events(ri) #> [1] \"2019-05-25\"  # On weekends AND NOT the 25th of the month rsd1 <- rsetdiff(on_weekends, on_25th) alma_events(rsd1) #>  [1] \"2019-04-06\" \"2019-04-07\" \"2019-04-13\" \"2019-04-14\" \"2019-04-20\" #>  [6] \"2019-04-21\" \"2019-04-27\" \"2019-04-28\" \"2019-05-04\" \"2019-05-05\" #> [11] \"2019-05-11\" \"2019-05-12\" \"2019-05-18\" \"2019-05-19\" \"2019-05-26\"  # On the 25th of the month AND NOT the weekend rsd2 <- rsetdiff(on_25th, on_weekends) alma_events(rsd2) #> [1] \"2019-04-25\""},{"path":"/dev/reference/stepper.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a new stepper — stepper","title":"Create a new stepper — stepper","text":"stepper() returns function can used add subtract number days Date, \"stepping\" events specified rschedule. supply rschedule step relative , call returned function number days step . workdays() convenient stepper stepping weekend. %s+% steps forwards. %s-% steps backwards. must use %s+ %s-% control stepping. + - work due limitations R's S3 dispatch system. Alternatively, can call vctrs::vec_arith() directly, powers %s+% correct double dispatch implementation.","code":""},{"path":"/dev/reference/stepper.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a new stepper — stepper","text":"","code":"stepper(rschedule)  x %s+% y  x %s-% y  workdays(n, since = NULL, until = NULL)"},{"path":"/dev/reference/stepper.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a new stepper — stepper","text":"rschedule [rschedule] rschedule, rrule, runion, rintersect, rsetdiff. x, y [objects] Objects perform step arithmetic . Typically Dates steppers. n [integer] number days step. Can negative step backwards. since [Date(1)] lower bound event set. Depending final recurrence rule, pieces information anchor date might used generate complete recurrence rule. [Date(1)] upper bound event set.","code":""},{"path":"/dev/reference/stepper.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create a new stepper — stepper","text":"stepper() returns function 1 argument, n, can used step n days, relative rschedule. workdays() return new stepper object. %s+% %s-% return new shifted Date vector.","code":""},{"path":"/dev/reference/stepper.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Create a new stepper — stepper","text":"Internally, stepper just powered alma_step(), feel free use directly.","code":""},{"path":"/dev/reference/stepper.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create a new stepper — stepper","text":"","code":"# A Thursday and Friday x <- as.Date(c(\"1970-01-01\", \"1970-01-02\"))  # Thursday is stepped forward 1 working day to Friday, # and then 1 more working day to Monday. # Friday is stepped forward 1 working day to Monday, # and then 1 more working day to Tuesday x %s+% workdays(2) #> [1] \"1970-01-05\" \"1970-01-06\"  # ---------------------------------------------------------------------------  on_weekends <- weekly() %>%   recur_on_weekends()  on_christmas <- yearly() %>%   recur_on_day_of_month(25) %>%   recur_on_month_of_year(\"Dec\")  rb <- runion(on_weekends, on_christmas)  workday <- stepper(rb)  # Friday before Christmas, which was on a Monday friday_before_christmas <- as.Date(\"2000-12-22\")  # Steps over the weekend and Christmas to the following Tuesday friday_before_christmas %s+% workday(1) #> [1] \"2000-12-26\"  # ---------------------------------------------------------------------------  # Christmas in 2005 was on a Sunday, but your company probably \"observed\" # it on Monday. So when you are on the Friday before Christmas in 2005, # stepping forward 1 working day should go to Tuesday.  # We'll adjust the previous rule for Christmas to roll to the nearest # non-weekend day, if it happened to fall on a weekend. on_observed_christmas <- radjusted(   on_christmas,   adjust_on = on_weekends,   adjustment = adj_nearest )  # Note that the \"observed\" date for Christmas is the 26th alma_search(\"2005-01-01\", \"2006-01-01\", on_observed_christmas) #> [1] \"2005-12-26\"  rb2 <- runion(on_weekends, on_observed_christmas)  workday2 <- stepper(rb2)  friday_before_christmas_2005 <- as.Date(\"2005-12-23\")  # Steps over the weekend and the observed Christmas date # of 2005-12-26 to Tuesday the 27th. friday_before_christmas_2005 %s+% workday2(1) #> [1] \"2005-12-27\""},{"path":"/dev/news/index.html","id":"almanac-development-version","dir":"Changelog","previous_headings":"","what":"almanac (development version)","title":"almanac (development version)","text":"R >=4.0.0 now required, line tidyverse standards.","code":""},{"path":"/dev/news/index.html","id":"almanac-100","dir":"Changelog","previous_headings":"","what":"almanac 1.0.0","title":"almanac 1.0.0","text":"CRAN release: 2023-04-13","code":""},{"path":"/dev/news/index.html","id":"new-features-1-0-0","dir":"Changelog","previous_headings":"","what":"New features","title":"almanac 1.0.0","text":"New holiday calendar API corresponding vignette vignette(\"holidays-calendars\") (#96): rholiday() creates new holiday holiday name rschedule defines holiday occurs. number pre-created holidays prefixed hol_*(), hol_christmas() hol_us_thanksgiving(). Holidays rschedules, can use alma_*() functions . hol_observe(), hol_offset(), hol_rename() three helpers holiday API. particular, hol_observe() tweaks holiday’s observance date align business actually celebrated holiday. rcalendar() bundles multiple holidays together calendar. Calendars similar runion()s, can use alma_*() functions , also come specialized API functions start cal_*(), cal_match() look holiday name date corresponds , cal_events() filter holidays within particular year. cal_us_federal() example calendar representing federal holidays recognized United States. New roffset() creating rschedule events offset existing rschedule (#94). New rcustom() creating rschedule manually defined event dates (#90). alma_events() gained year argument limit returned set events specific years. runion(), rintersect(), rsetdiff() gained ... allows provide rschedules creation time. now preferred way create set-based rschedules (#91). Steppers created stepper() now work ..arguments slider::slide_index() friends (#80).","code":""},{"path":"/dev/news/index.html","id":"lifecycle-changes-1-0-0","dir":"Changelog","previous_headings":"","what":"Lifecycle changes","title":"almanac 1.0.0","text":"following functions deprecated favor intuitively named alternatives (#83): recur_on_mday() -> recur_on_day_of_month() recur_on_wday() -> recur_on_day_of_week() recur_on_yday() -> recur_on_day_of_year() recur_on_yweek() -> recur_on_week_of_year() recur_on_ymonth() -> recur_on_month_of_year() functions aggressively deprecated removed next minor version almanac. family add_*() functions deprecated (#92). add_rschedule() deprecated favor using ... argument runion(), rintersect(), rsetdiff() directly. add_rdates() deprecated favor using combination runion() rcustom(). add_exdates() deprecated favor using combination rsetdiff() rcustom(). functions aggressively deprecated removed next minor version almanac. offset argument recur_on_easter() deprecated favor using roffset() (#94).","code":""},{"path":"/dev/news/index.html","id":"breaking-changes-1-0-0","dir":"Changelog","previous_headings":"","what":"Breaking changes","title":"almanac 1.0.0","text":"almanac class names now prefixed almanac_* avoid potential clashes packages. recur_with_week_start() argument wday renamed day. following developer facing functions removed either longer applicable provided extension mechanisms useful practice (#93): new_rbundle() new_runion() new_rintersect() new_rsetdiff() rbundle_restore()","code":""},{"path":"/dev/news/index.html","id":"bug-fixes-and-minor-improvements-1-0-0","dir":"Changelog","previous_headings":"","what":"Bug fixes and minor improvements","title":"almanac 1.0.0","text":"recur_for_count() longer overrides (#95). New almanac_since() almanac_until() helpers access default since values used rules (#95). Greatly improved print methods almanac classes using cli (#86). Updated internal JavaScript rrule library version 2.7.2 (#82). R >=3.5.0 now required, line tidyverse standards.","code":""},{"path":"/dev/news/index.html","id":"almanac-011","dir":"Changelog","previous_headings":"","what":"almanac 0.1.1","title":"almanac 0.1.1","text":"CRAN release: 2020-05-28 Explicitly imports R6::R6Class() V8::v8() avoid R CMD Check false alarms (#74). Fix USBAN error casting NA_real_ NaN integer (#72).","code":""},{"path":"/dev/news/index.html","id":"almanac-010","dir":"Changelog","previous_headings":"","what":"almanac 0.1.0","title":"almanac 0.1.0","text":"CRAN release: 2020-05-27 Added NEWS.md file track changes package.","code":""}]
