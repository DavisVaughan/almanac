<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="almanac">
<title>Holidays and calendars • almanac</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Holidays and calendars">
<meta property="og:description" content="almanac">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">almanac</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">1.0.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../articles/almanac.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/adjust-and-shift.html">Adjusting and shifting dates</a>
    <a class="dropdown-item" href="../articles/holidays-calendars.html">Holidays and calendars</a>
    <a class="dropdown-item" href="../articles/icalendar.html">iCalendar specification</a>
    <a class="dropdown-item" href="../articles/quarterly.html">Quarterly rules</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/DavisVaughan/almanac/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Holidays and calendars</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/DavisVaughan/almanac/blob/HEAD/vignettes/holidays-calendars.Rmd" class="external-link"><code>vignettes/holidays-calendars.Rmd</code></a></small>
      <div class="d-none name"><code>holidays-calendars.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/DavisVaughan/almanac" class="external-link">almanac</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># A rule for weekends</span></span>
<span><span class="va">on_weekends</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/rrule.html">weekly</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/recur_on_day_of_week.html">recur_on_weekends</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>almanac provides low-level tools for building all manner of
recurrence rules, but it also provides a fairly high-level set of tools
for working with holidays and calendars. These are arguably the most
useful part of almanac, because they do a lot of the heavy lifting of
defining your own holidays and observance rules for you.</p>
<div class="section level2">
<h2 id="holidays">Holidays<a class="anchor" aria-label="anchor" href="#holidays"></a>
</h2>
<p>There are a number of pre-generated holidays in almanac, which all
start with <code>hol_*()</code>, such as <code><a href="../reference/holidays.html">hol_christmas()</a></code>.
If the holiday is specific to a country, then it is also prefixed as
such, like <code><a href="../reference/holidays.html">hol_us_veterans_day()</a></code> (currently only global and
US holidays are provided).</p>
<p>A holiday object is just another type of recurrence schedule:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">on_christmas</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/holidays.html">hol_christmas</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">on_christmas</span></span>
<span><span class="co">#&gt; &lt;Christmas&gt;</span></span>
<span><span class="co">#&gt;  &lt;rrule&gt;</span></span>
<span><span class="co">#&gt;  • frequency: yearly</span></span>
<span><span class="co">#&gt;  • range: [1900-01-01, 2100-01-01]</span></span>
<span><span class="co">#&gt;  • month of year: Dec</span></span>
<span><span class="co">#&gt;  • day of month: 25</span></span></code></pre></div>
<p>This means that you can use it with any of the <code>alma_*()</code>
functions you might have learned about in the other vignettes.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/alma_events.html">alma_events</a></span><span class="op">(</span><span class="va">on_christmas</span>, year <span class="op">=</span> <span class="fl">2020</span><span class="op">:</span><span class="fl">2025</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "2020-12-25" "2021-12-25" "2022-12-25" "2023-12-25" "2024-12-25"</span></span>
<span><span class="co">#&gt; [6] "2025-12-25"</span></span></code></pre></div>
<p>You’ll use these holiday objects to build up a <em>calendar</em>,
which is a bundle of individual holidays that represent the rules of
your specific business.</p>
<p>There are 3 helpers that are specific to holidays:</p>
<ul>
<li><p><code><a href="../reference/holiday-utilities.html">hol_observe()</a></code></p></li>
<li><p><code><a href="../reference/holiday-utilities.html">hol_offset()</a></code></p></li>
<li><p><code><a href="../reference/holiday-utilities.html">hol_rename()</a></code></p></li>
</ul>
<div class="section level3">
<h3 id="hol_observe">
<code>hol_observe()</code><a class="anchor" aria-label="anchor" href="#hol_observe"></a>
</h3>
<p><code><a href="../reference/holiday-utilities.html">hol_observe()</a></code> adjusts a holiday to respect observance
rules that might be set by your company. For example, if Christmas falls
on Saturday, then your company may actually <em>observe</em> it on the
preceding Friday or following Monday.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">on_christmas</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/holidays.html">hol_christmas</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/holiday-utilities.html">hol_observe</a></span><span class="op">(</span>adjust_on <span class="op">=</span> <span class="va">on_weekends</span>, adjustment <span class="op">=</span> <span class="va">adj_nearest</span><span class="op">)</span></span>
<span></span>
<span><span class="va">on_christmas</span></span>
<span><span class="co">#&gt; &lt;Christmas&gt;</span></span>
<span><span class="co">#&gt;  &lt;radjusted&gt;</span></span>
<span><span class="co">#&gt;   <span style="text-decoration: underline;">adjust:</span></span></span>
<span><span class="co">#&gt;   &lt;rrule&gt;</span></span>
<span><span class="co">#&gt;   • frequency: yearly</span></span>
<span><span class="co">#&gt;   • range: [1900-01-01, 2100-01-01]</span></span>
<span><span class="co">#&gt;   • month of year: Dec</span></span>
<span><span class="co">#&gt;   • day of month: 25</span></span>
<span><span class="co">#&gt;   <span style="text-decoration: underline;">adjust on:</span></span></span>
<span><span class="co">#&gt;   &lt;rrule&gt;</span></span>
<span><span class="co">#&gt;   • frequency: weekly</span></span>
<span><span class="co">#&gt;   • range: [1900-01-01, 2100-01-01]</span></span>
<span><span class="co">#&gt;   • day of week: Sat, and Sun</span></span></code></pre></div>
<p>If you’ve read <code><a href="../articles/adjust-and-shift.html">vignette("adjust-and-shift")</a></code>, then you’ll
recognize that observances look similar to <code><a href="../reference/radjusted.html">radjusted()</a></code>, and
in fact that is the tooling that is used under the hood.</p>
<p>If we run our updated holiday through <code><a href="../reference/alma_events.html">alma_events()</a></code>
again, you’ll see that it now rolls to the nearest weekday if Christmas
falls on a weekend.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/alma_events.html">alma_events</a></span><span class="op">(</span><span class="va">on_christmas</span>, year <span class="op">=</span> <span class="fl">2020</span><span class="op">:</span><span class="fl">2025</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "2020-12-25" "2021-12-24" "2022-12-26" "2023-12-25" "2024-12-25"</span></span>
<span><span class="co">#&gt; [6] "2025-12-25"</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="hol_offset">
<code>hol_offset()</code><a class="anchor" aria-label="anchor" href="#hol_offset"></a>
</h3>
<p><code><a href="../reference/holiday-utilities.html">hol_offset()</a></code> allows you to create holidays that are
<em>relative</em> to some other holiday. For example, Good Friday is
always the Friday before Easter.</p>
<p>Let’s take a look at building a holiday for Boxing Day, the day after
Christmas. <code><a href="../reference/holiday-utilities.html">hol_offset()</a></code> retains the name of the original
holiday, so we’ll also need <code><a href="../reference/holiday-utilities.html">hol_rename()</a></code> to rename it to
Boxing Day:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">on_boxing_day</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/holidays.html">hol_christmas</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/holiday-utilities.html">hol_offset</a></span><span class="op">(</span>by <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/holiday-utilities.html">hol_rename</a></span><span class="op">(</span><span class="st">"Boxing Day"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">on_boxing_day</span></span>
<span><span class="co">#&gt; &lt;Boxing Day&gt;</span></span>
<span><span class="co">#&gt;  &lt;roffset[by = 1]&gt;</span></span>
<span><span class="co">#&gt;   &lt;rrule&gt;</span></span>
<span><span class="co">#&gt;   • frequency: yearly</span></span>
<span><span class="co">#&gt;   • range: [1900-01-01, 2100-01-01]</span></span>
<span><span class="co">#&gt;   • month of year: Dec</span></span>
<span><span class="co">#&gt;   • day of month: 25</span></span></code></pre></div>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/alma_events.html">alma_events</a></span><span class="op">(</span><span class="va">on_boxing_day</span>, year <span class="op">=</span> <span class="fl">2020</span><span class="op">:</span><span class="fl">2025</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "2020-12-26" "2021-12-26" "2022-12-26" "2023-12-26" "2024-12-26"</span></span>
<span><span class="co">#&gt; [6] "2025-12-26"</span></span></code></pre></div>
<p>Great! Now what if we wanted to add an observance rule to Boxing Day?
This is actually pretty complicated, because it is dependent on the
observance rules for Christmas. For example, if Christmas falls on a
Saturday, but is observed on Friday, then we probably want Boxing Day to
be observed on the following Monday. If Christmas falls on a Sunday and
is observed on the following Monday, then Boxing Day would be observed
on the following Tuesday. Luckily you can layer
<code><a href="../reference/holiday-utilities.html">hol_observe()</a></code> with <code><a href="../reference/holiday-utilities.html">hol_offset()</a></code> to build up a
recurrence schedule that matches the rules we are looking for:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">on_christmas</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/holidays.html">hol_christmas</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/holiday-utilities.html">hol_observe</a></span><span class="op">(</span>adjust_on <span class="op">=</span> <span class="va">on_weekends</span>, adjustment <span class="op">=</span> <span class="va">adj_nearest</span><span class="op">)</span></span>
<span></span>
<span><span class="va">on_boxing_day</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/holidays.html">hol_christmas</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/holiday-utilities.html">hol_observe</a></span><span class="op">(</span>adjust_on <span class="op">=</span> <span class="va">on_weekends</span>, adjustment <span class="op">=</span> <span class="va">adj_nearest</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/holiday-utilities.html">hol_offset</a></span><span class="op">(</span>by <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/holiday-utilities.html">hol_observe</a></span><span class="op">(</span>adjust_on <span class="op">=</span> <span class="va">on_weekends</span>, adjustment <span class="op">=</span> <span class="va">adj_following</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/holiday-utilities.html">hol_rename</a></span><span class="op">(</span><span class="st">"Boxing Day"</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  christmas <span class="op">=</span> <span class="fu"><a href="../reference/alma_events.html">alma_events</a></span><span class="op">(</span><span class="va">on_christmas</span>, year <span class="op">=</span> <span class="fl">2020</span><span class="op">:</span><span class="fl">2025</span><span class="op">)</span>,</span>
<span>  boxing_day <span class="op">=</span> <span class="fu"><a href="../reference/alma_events.html">alma_events</a></span><span class="op">(</span><span class="va">on_boxing_day</span>, year <span class="op">=</span> <span class="fl">2020</span><span class="op">:</span><span class="fl">2025</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">df</span><span class="op">$</span><span class="va">christmas_weekday</span> <span class="op">&lt;-</span> <span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/day.html" class="external-link">wday</a></span><span class="op">(</span><span class="va">df</span><span class="op">$</span><span class="va">christmas</span>, label <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">df</span><span class="op">$</span><span class="va">boxing_day_weekday</span> <span class="op">&lt;-</span> <span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/day.html" class="external-link">wday</a></span><span class="op">(</span><span class="va">df</span><span class="op">$</span><span class="va">boxing_day</span>, label <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="va">df</span></span>
<span><span class="co">#&gt;    christmas boxing_day christmas_weekday boxing_day_weekday</span></span>
<span><span class="co">#&gt; 1 2020-12-25 2020-12-28               Fri                Mon</span></span>
<span><span class="co">#&gt; 2 2021-12-24 2021-12-27               Fri                Mon</span></span>
<span><span class="co">#&gt; 3 2022-12-26 2022-12-27               Mon                Tue</span></span>
<span><span class="co">#&gt; 4 2023-12-25 2023-12-26               Mon                Tue</span></span>
<span><span class="co">#&gt; 5 2024-12-25 2024-12-26               Wed                Thu</span></span>
<span><span class="co">#&gt; 6 2025-12-25 2025-12-26               Thu                Fri</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="custom-holidays">Custom holidays<a class="anchor" aria-label="anchor" href="#custom-holidays"></a>
</h3>
<p>almanac doesn’t attempt to provide a comprehensive set of holidays.
Instead, it makes it easy for you to create your own using
<code><a href="../reference/rholiday.html">rholiday()</a></code>. All you need is a recurrence rule that aligns
with the holiday date and a name. Let’s create one for Canada Day, which
occurs on July 1st each year.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">hol_canada_day</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">since</span> <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">until</span> <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">out</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/rrule.html">yearly</a></span><span class="op">(</span>since <span class="op">=</span> <span class="va">since</span>, until <span class="op">=</span> <span class="va">until</span><span class="op">)</span></span>
<span>  <span class="va">out</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/recur_on_month_of_year.html">recur_on_month_of_year</a></span><span class="op">(</span><span class="va">out</span>, <span class="st">"July"</span><span class="op">)</span></span>
<span>  <span class="va">out</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/recur_on_day_of_month.html">recur_on_day_of_month</a></span><span class="op">(</span><span class="va">out</span>, <span class="fl">1L</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="fu"><a href="../reference/rholiday.html">rholiday</a></span><span class="op">(</span>rschedule <span class="op">=</span> <span class="va">out</span>, name <span class="op">=</span> <span class="st">"Canada Day"</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">hol_canada_day</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; &lt;Canada Day&gt;</span></span>
<span><span class="co">#&gt;  &lt;rrule&gt;</span></span>
<span><span class="co">#&gt;  • frequency: yearly</span></span>
<span><span class="co">#&gt;  • range: [1900-01-01, 2100-01-01]</span></span>
<span><span class="co">#&gt;  • month of year: Jul</span></span>
<span><span class="co">#&gt;  • day of month: 1</span></span>
<span></span>
<span><span class="fu"><a href="../reference/alma_next.html">alma_next</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2019-01-01"</span><span class="op">)</span>, <span class="fu">hol_canada_day</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "2019-07-01"</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="calendars">Calendars<a class="anchor" aria-label="anchor" href="#calendars"></a>
</h2>
<p>Holidays are great for one off operations, but typically if you are
building a business calendar then you’ll need to bundle multiple
holidays together. To do that, you’ll need a <em>calendar</em> object.
You can create one by providing holidays to
<code><a href="../reference/rcalendar.html">rcalendar()</a></code>:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cal</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/rcalendar.html">rcalendar</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="../reference/holidays.html">hol_christmas</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="../reference/holidays.html">hol_new_years_day</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  <span class="fu">hol_canada_day</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">cal</span></span>
<span><span class="co">#&gt; &lt;rcalendar[3]&gt;</span></span>
<span><span class="co">#&gt; • Christmas</span></span>
<span><span class="co">#&gt; • New Year's Day</span></span>
<span><span class="co">#&gt; • Canada Day</span></span></code></pre></div>
<p>Like holidays, calendars are recurrence schedules that work with any
of the <code>alma_*()</code> functions, but they also have their own
special <code>cal_*()</code> API.</p>
<div class="section level3">
<h3 id="cal_events">
<code>cal_events()</code><a class="anchor" aria-label="anchor" href="#cal_events"></a>
</h3>
<p>If you’d like to generate the holidays for a particular year, then
you should use <code>cal_events():</code></p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/cal_events.html">cal_events</a></span><span class="op">(</span><span class="va">cal</span>, year <span class="op">=</span> <span class="fl">2023</span><span class="op">)</span></span>
<span><span class="co">#&gt;             name       date</span></span>
<span><span class="co">#&gt; 1 New Year's Day 2023-01-01</span></span>
<span><span class="co">#&gt; 2     Canada Day 2023-07-01</span></span>
<span><span class="co">#&gt; 3      Christmas 2023-12-25</span></span></code></pre></div>
<p>This is similar to <code><a href="../reference/alma_events.html">alma_events()</a></code>, but there are two big
differences:</p>
<ul>
<li><p>The holiday name is displayed along with the event date</p></li>
<li><p>It has special support for observance rules</p></li>
</ul>
<p>Note that we didn’t add any observance rules into our original
calendar, let’s go back and adjust our holidays to roll off
weekends:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cal</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/rcalendar.html">rcalendar</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="../reference/holidays.html">hol_christmas</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="../reference/holiday-utilities.html">hol_observe</a></span><span class="op">(</span>adjust_on <span class="op">=</span> <span class="va">on_weekends</span>, adjustment <span class="op">=</span> <span class="va">adj_nearest</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="../reference/holidays.html">hol_new_years_day</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="../reference/holiday-utilities.html">hol_observe</a></span><span class="op">(</span>adjust_on <span class="op">=</span> <span class="va">on_weekends</span>, adjustment <span class="op">=</span> <span class="va">adj_nearest</span><span class="op">)</span>,</span>
<span>  <span class="co"># Canada normally rolls their holidays forward to the following Monday</span></span>
<span>  <span class="fu">hol_canada_day</span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="../reference/holiday-utilities.html">hol_observe</a></span><span class="op">(</span>adjust_on <span class="op">=</span> <span class="va">on_weekends</span>, adjustment <span class="op">=</span> <span class="va">adj_following</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Note that the holidays generated by <code><a href="../reference/cal_events.html">cal_events()</a></code> are
different from the previous ones because they now respect the observance
rules when a holiday falls on a weekend.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/cal_events.html">cal_events</a></span><span class="op">(</span><span class="va">cal</span>, year <span class="op">=</span> <span class="fl">2023</span><span class="op">)</span></span>
<span><span class="co">#&gt;             name       date</span></span>
<span><span class="co">#&gt; 1 New Year's Day 2023-01-02</span></span>
<span><span class="co">#&gt; 2     Canada Day 2023-07-03</span></span>
<span><span class="co">#&gt; 3      Christmas 2023-12-25</span></span></code></pre></div>
<p>There is one more observance related feature worth pointing out.
Let’s take a look at holidays for 2011:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/cal_events.html">cal_events</a></span><span class="op">(</span><span class="va">cal</span>, year <span class="op">=</span> <span class="fl">2011</span><span class="op">)</span></span>
<span><span class="co">#&gt;             name       date</span></span>
<span><span class="co">#&gt; 1 New Year's Day 2010-12-31</span></span>
<span><span class="co">#&gt; 2     Canada Day 2011-07-01</span></span>
<span><span class="co">#&gt; 3      Christmas 2011-12-26</span></span></code></pre></div>
<p>New Year’s Day fell on a Saturday that year, so it was adjusted
<em>backwards</em> to the preceding Friday, which actually fell in 2010.
<code><a href="../reference/cal_events.html">cal_events()</a></code> is smart enough to know that if you are
requesting “2011’s holidays,” then New Year’s Day should probably be
included even if it was <em>observed</em> in a different year.</p>
<p>If you don’t want this behavior, you can set
<code>observed = TRUE</code> to use the observed year when filtering for
the <code>year</code>.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># New Year's Day is gone</span></span>
<span><span class="fu"><a href="../reference/cal_events.html">cal_events</a></span><span class="op">(</span><span class="va">cal</span>, year <span class="op">=</span> <span class="fl">2011</span>, observed <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt;         name       date</span></span>
<span><span class="co">#&gt; 1 Canada Day 2011-07-01</span></span>
<span><span class="co">#&gt; 2  Christmas 2011-12-26</span></span>
<span></span>
<span><span class="co"># And is now listed twice here</span></span>
<span><span class="fu"><a href="../reference/cal_events.html">cal_events</a></span><span class="op">(</span><span class="va">cal</span>, year <span class="op">=</span> <span class="fl">2010</span>, observed <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt;             name       date</span></span>
<span><span class="co">#&gt; 1 New Year's Day 2010-01-01</span></span>
<span><span class="co">#&gt; 2     Canada Day 2010-07-01</span></span>
<span><span class="co">#&gt; 3      Christmas 2010-12-24</span></span>
<span><span class="co">#&gt; 4 New Year's Day 2010-12-31</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="cal_match">
<code>cal_match()</code><a class="anchor" aria-label="anchor" href="#cal_match"></a>
</h3>
<p>If you’ve ever needed to determine if a date is a holiday, then
you’ve likely reached for <code><a href="../reference/alma_in.html">alma_in()</a></code>, which works like
<code>%in%</code> and returns a logical vector. But if you also need to
determine <em>which</em> holiday that date corresponded to, then you’ll
need to use <code><a href="../reference/cal_match.html">cal_match()</a></code> instead:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="st">"2019-12-25"</span>,</span>
<span>  <span class="st">"2019-12-26"</span>,</span>
<span>  <span class="st">"2010-12-31"</span>,</span>
<span>  <span class="st">"2011-01-01"</span></span>
<span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  x <span class="op">=</span> <span class="va">x</span>,</span>
<span>  name <span class="op">=</span> <span class="fu"><a href="../reference/cal_match.html">cal_match</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">cal</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt;            x           name</span></span>
<span><span class="co">#&gt; 1 2019-12-25      Christmas</span></span>
<span><span class="co">#&gt; 2 2019-12-26           &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 3 2010-12-31 New Year's Day</span></span>
<span><span class="co">#&gt; 4 2011-01-01           &lt;NA&gt;</span></span></code></pre></div>
<p>Note that because our calendar has observance rules baked in, it
shows <code>2010-12-31</code> (a Friday) as New Year’s Day rather than
the 1st of the year (a Saturday).</p>
</div>
<div class="section level3">
<h3 id="us-federal-calendar">US federal calendar<a class="anchor" aria-label="anchor" href="#us-federal-calendar"></a>
</h3>
<p>almanac comes with one pre-built calendar,
<code><a href="../reference/cal_us_federal.html">cal_us_federal()</a></code>, which contains the federally recognized
holidays in the United States. It is meant to serve as an example of
what you can build with almanac, but it is also pretty useful on its
own:</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/cal_us_federal.html">cal_us_federal</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; &lt;rcalendar[11]&gt;</span></span>
<span><span class="co">#&gt; • New Year's Day</span></span>
<span><span class="co">#&gt; • US Martin Luther King Jr. Day</span></span>
<span><span class="co">#&gt; • US Presidents' Day</span></span>
<span><span class="co">#&gt; • US Memorial Day</span></span>
<span><span class="co">#&gt; • US Juneteenth</span></span>
<span><span class="co">#&gt; • US Independence Day</span></span>
<span><span class="co">#&gt; • US Labor Day</span></span>
<span><span class="co">#&gt; • US Indigenous Peoples' Day</span></span>
<span><span class="co">#&gt; • US Veterans Day</span></span>
<span><span class="co">#&gt; • US Thanksgiving</span></span>
<span><span class="co">#&gt; • Christmas</span></span></code></pre></div>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/cal_events.html">cal_events</a></span><span class="op">(</span><span class="fu"><a href="../reference/cal_us_federal.html">cal_us_federal</a></span><span class="op">(</span><span class="op">)</span>, year <span class="op">=</span> <span class="fl">2023</span><span class="op">)</span></span>
<span><span class="co">#&gt;                             name       date</span></span>
<span><span class="co">#&gt; 1                 New Year's Day 2023-01-02</span></span>
<span><span class="co">#&gt; 2  US Martin Luther King Jr. Day 2023-01-16</span></span>
<span><span class="co">#&gt; 3             US Presidents' Day 2023-02-20</span></span>
<span><span class="co">#&gt; 4                US Memorial Day 2023-05-29</span></span>
<span><span class="co">#&gt; 5                  US Juneteenth 2023-06-19</span></span>
<span><span class="co">#&gt; 6            US Independence Day 2023-07-04</span></span>
<span><span class="co">#&gt; 7                   US Labor Day 2023-09-04</span></span>
<span><span class="co">#&gt; 8     US Indigenous Peoples' Day 2023-10-09</span></span>
<span><span class="co">#&gt; 9                US Veterans Day 2023-11-10</span></span>
<span><span class="co">#&gt; 10               US Thanksgiving 2023-11-23</span></span>
<span><span class="co">#&gt; 11                     Christmas 2023-12-25</span></span></code></pre></div>
<p>Note that this calendar doesn’t claim to be historically accurate, it
is only intended to be a representation of the current federally
recognized holidays. You <em>can</em> build historically accurate
calendars (i.e. you can represent that Juneteenth wasn’t celebrated
before 2021) it just takes a bit more effort.</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Davis Vaughan, Posit Software, PBC.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
